{
  "packageId": "test_locked_choices",
  "metadata": {
    "name": "Test Scene - Sir Brante Locked Choice Pattern",
    "timestamp": "2025-11-02T00:00:00Z",
    "description": "Demonstrates locked choices with visible requirements (Sir Brante pattern). Tests stat-gate + resource-cost + risky + fallback structure.",
    "author": "Wayfarer Team",
    "version": "1.0.0"
  },
  "content": {
    "sceneTemplates": [
      {
        "id": "test_merchant_negotiation",
        "archetype": "Linear",
        "displayNameTemplate": "Tense Negotiation with {NPCName}",
        "introNarrativeTemplate": "{NPCName} crosses their arms. 'I know what you need. Question is... what can you offer?'",
        "tier": 0,
        "isStarter": false,
        "expirationDays": null,
        "placementFilter": {
          "placementType": "NPC",
          "personalityTypes": ["Mercantile"],
          "minBond": null,
          "maxBond": null,
          "npcTags": [],
          "locationProperties": [],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "opening_offer",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "opening_offer",
            "narrativeTemplate": "The merchant's eyes glint. You've dealt with their type before - everything has a price.\n\n'Standard rate: fifteen coins. Unless...' They pause, measuring you. 'Unless you've got something better to offer.'",
            "priority": 100,
            "narrativeHints": {
              "tone": "calculating",
              "theme": "negotiation",
              "context": "multiple approaches",
              "style": "terse"
            },
            "choiceTemplates": [
              {
                "id": "authority_command",
                "actionTextTemplate": "Assert Authority (Demand Fair Price)",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "orPaths": [
                    {
                      "label": "Lawfulness 3+",
                      "numericRequirements": [
                        {
                          "type": "Scale",
                          "context": "Lawfulness",
                          "threshold": 3,
                          "label": "Lawfulness 3+"
                        }
                      ]
                    }
                  ]
                },
                "costTemplate": {
                  "resolve": 0,
                  "coins": 0,
                  "timeSegments": 0
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 2,
                  "timeSegments": 0,
                  "bondChanges": [],
                  "scaleShifts": [
                    {
                      "scaleType": "Fame",
                      "delta": 1
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              },
              {
                "id": "diplomatic_persuasion",
                "actionTextTemplate": "Negotiate Diplomatically (Appeal to Fairness)",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "orPaths": [
                    {
                      "label": "Method 3+",
                      "numericRequirements": [
                        {
                          "type": "Scale",
                          "context": "Method",
                          "threshold": 3,
                          "label": "Method 3+"
                        }
                      ]
                    }
                  ]
                },
                "costTemplate": {
                  "resolve": 1,
                  "coins": 0,
                  "timeSegments": 1
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [],
                  "scaleShifts": [
                    {
                      "scaleType": "Method",
                      "delta": 1
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              },
              {
                "id": "pay_premium",
                "actionTextTemplate": "Pay Premium Price (15 Coins)",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "orPaths": [
                    {
                      "label": "15 Coins",
                      "numericRequirements": [
                        {
                          "type": "Coins",
                          "context": null,
                          "threshold": 15,
                          "label": "15 Coins"
                        }
                      ]
                    }
                  ]
                },
                "costTemplate": {
                  "resolve": 0,
                  "coins": 15,
                  "timeSegments": 0
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [],
                  "scaleShifts": [],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              },
              {
                "id": "walk_away",
                "actionTextTemplate": "Walk Away (No Deal)",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "orPaths": []
                },
                "costTemplate": {
                  "resolve": 0,
                  "coins": 0,
                  "timeSegments": 1
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [],
                  "scaleShifts": [
                    {
                      "scaleType": "Fame",
                      "delta": -1
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              }
            ]
          }
        ]
      }
    ]
  }
}
