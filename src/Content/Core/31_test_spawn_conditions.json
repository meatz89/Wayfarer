{
  "packageId": "test_spawn_conditions",
  "version": "1.0.0",
  "description": "Test content for SpawnConditions system validation - covers all three evaluation dimensions",

  "sceneTemplates": [
    {
      "id": "test_rain_mountain_scene",
      "archetype": "Route",
      "displayNameTemplate": "Mudslide Warning",
      "placementFilter": {
        "placementType": "Route",
        "terrainTypes": ["Mountain", "Climbing"],
        "minDangerRating": 30
      },
      "spawnConditions": {
        "combinationLogic": "AND",
        "worldState": {
          "weather": "Rain",
          "minDay": 2,
          "maxDay": 10
        }
      },
      "situationTemplates": [
        {
          "id": "mudslide_warning_situation",
          "name": "Mudslide Risk",
          "description": "Heavy rain has destabilized the mountain path. Proceed with caution.",
          "systemType": "None",
          "interactionType": "Instant",
          "costs": {},
          "choiceTemplates": [
            {
              "id": "proceed_carefully",
              "displayText": "Proceed carefully",
              "actionType": "Instant",
              "costs": {},
              "reward": {
                "systemMessage": "You navigate the unstable terrain successfully."
              }
            }
          ]
        }
      ]
    },

    {
      "id": "test_npc_consequence_scene",
      "archetype": "NPC",
      "displayNameTemplate": "{{npc.Name}}'s Gratitude",
      "placementFilter": {
        "placementType": "NPC",
        "personalityTypes": ["Friendly"],
        "minBond": 5
      },
      "spawnConditions": {
        "combinationLogic": "AND",
        "playerState": {
          "minStats": {
            "Morality": 3
          }
        },
        "entityState": {
          "npcBond": {
            "elena": 10
          }
        }
      },
      "situationTemplates": [
        {
          "id": "gratitude_situation",
          "name": "A Token of Thanks",
          "description": "The NPC approaches with a grateful expression.",
          "systemType": "None",
          "interactionType": "Instant",
          "costs": {},
          "choiceTemplates": [
            {
              "id": "accept_thanks",
              "displayText": "Accept their thanks",
              "actionType": "Instant",
              "costs": {},
              "reward": {
                "coinReward": 10,
                "systemMessage": "They press a small coin purse into your hands."
              }
            }
          ]
        }
      ]
    },

    {
      "id": "test_evening_location_scene",
      "archetype": "Location",
      "displayNameTemplate": "Evening Gathering",
      "placementFilter": {
        "placementType": "Location",
        "locationProperties": ["Public", "Urban"]
      },
      "spawnConditions": {
        "combinationLogic": "AND",
        "worldState": {
          "timeBlock": "Evening",
          "minDay": 3,
          "maxDay": 7
        }
      },
      "situationTemplates": [
        {
          "id": "evening_gathering_situation",
          "name": "Town Square Gathering",
          "description": "As evening falls, locals gather in the square to socialize.",
          "systemType": "None",
          "interactionType": "Instant",
          "costs": {},
          "choiceTemplates": [
            {
              "id": "join_gathering",
              "displayText": "Join the gathering",
              "actionType": "Instant",
              "costs": {},
              "reward": {
                "systemMessage": "You spend time with the locals, learning about the town."
              }
            },
            {
              "id": "observe_quietly",
              "displayText": "Observe from a distance",
              "actionType": "Instant",
              "costs": {},
              "reward": {
                "systemMessage": "You watch the gathering from the shadows."
              }
            }
          ]
        }
      ]
    },

    {
      "id": "test_recursive_spawn_scene",
      "archetype": "Location",
      "displayNameTemplate": "Investigation Discovery",
      "placementFilter": {
        "placementType": "Location",
        "locationProperties": ["Indoor"]
      },
      "spawnConditions": {
        "combinationLogic": "AND",
        "playerState": {
          "minStats": {
            "Transparency": -2
          }
        }
      },
      "situationTemplates": [
        {
          "id": "investigation_start",
          "name": "Strange Documents",
          "description": "You discover suspicious documents that warrant further investigation.",
          "systemType": "None",
          "interactionType": "Instant",
          "costs": {},
          "choiceTemplates": [
            {
              "id": "investigate_documents",
              "displayText": "Investigate the documents",
              "actionType": "Instant",
              "costs": {},
              "reward": {
                "sceneSpawns": [
                  {
                    "sceneTemplateId": "test_followup_investigation_scene",
                    "placementRelation": "CurrentLocation",
                    "delayDays": 1
                  }
                ],
                "systemMessage": "You take note of the details for future investigation."
              }
            },
            {
              "id": "ignore_documents",
              "displayText": "Ignore them",
              "actionType": "Instant",
              "costs": {},
              "reward": {
                "systemMessage": "You decide not to get involved."
              }
            }
          ]
        }
      ]
    },

    {
      "id": "test_followup_investigation_scene",
      "archetype": "Location",
      "displayNameTemplate": "Follow-up Investigation",
      "placementFilter": {
        "placementType": "Location"
      },
      "spawnConditions": {
        "combinationLogic": "OR",
        "playerState": {
          "requiredItems": []
        },
        "worldState": {
          "minDay": 2
        }
      },
      "situationTemplates": [
        {
          "id": "followup_investigation_situation",
          "name": "Piecing Together Clues",
          "description": "You return to analyze what you found.",
          "systemType": "None",
          "interactionType": "Instant",
          "costs": {},
          "choiceTemplates": [
            {
              "id": "analyze_clues",
              "displayText": "Analyze the clues",
              "actionType": "Instant",
              "costs": {},
              "reward": {
                "systemMessage": "The pattern becomes clearer."
              }
            }
          ]
        }
      ]
    },

    {
      "id": "test_complex_conditions_scene",
      "archetype": "Location",
      "displayNameTemplate": "Complex Test Scenario",
      "placementFilter": {
        "placementType": "Location",
        "locationProperties": ["Secluded"]
      },
      "spawnConditions": {
        "combinationLogic": "AND",
        "playerState": {
          "minStats": {
            "Morality": 5,
            "Caution": 3
          },
          "locationVisits": {
            "fountain_plaza": 2
          }
        },
        "worldState": {
          "timeBlock": "Morning",
          "minDay": 5,
          "maxDay": 15
        },
        "entityState": {
          "npcBond": {
            "elena": 8
          }
        }
      },
      "situationTemplates": [
        {
          "id": "complex_test_situation",
          "name": "Rare Opportunity",
          "description": "A unique convergence of circumstances presents itself.",
          "systemType": "None",
          "interactionType": "Instant",
          "costs": {},
          "choiceTemplates": [
            {
              "id": "seize_opportunity",
              "displayText": "Seize the moment",
              "actionType": "Instant",
              "costs": {},
              "reward": {
                "coinReward": 50,
                "systemMessage": "Your patience and preparation pay off handsomely."
              }
            }
          ]
        }
      ]
    }
  ]
}
