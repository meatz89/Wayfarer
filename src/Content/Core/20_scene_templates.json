{
  "packageId": "core_scene_templates",
  "metadata": {
    "name": "Scene Templates - Dynamic Content Infrastructure",
    "timestamp": "2025-10-28T00:00:00Z",
    "description": "SceneTemplate definitions for procedural Scene spawning. Scenes spawn from Choice rewards, Obligation phases, and events.",
    "author": "Wayfarer Team",
    "version": "1.0.0"
  },
  "content": {
    "sceneTemplates": [
      {
        "id": "inn_trouble_brewing",
        "archetype": "Linear",
        "displayNameTemplate": "Trouble in the Common Room",
        "introNarrativeTemplate": "A drunk patron is getting aggressive. Elena looks worried.",
        "tier": 1,
        "isStarter": false,
        "expirationDays": 1,
        "placementFilter": {
          "placementType": "NPC",
          "personalityTypes": [],
          "minBond": 3,
          "maxBond": null,
          "npcTags": [],
          "locationProperties": [],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "notice_trouble",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "notice_trouble",
            "type": "Normal",
            "narrativeTemplate": "A large man in a stained coat slams his mug down. 'More ale!' he shouts. Elena moves to serve him, but her eyes are wary.\n\nYou've seen this before - the way his jaw sets, the way his hands curl. Trouble brewing.",
            "priority": 100,
            "narrativeHints": {
              "tone": "tense",
              "theme": "escalation",
              "context": "observation",
              "style": "direct"
            },
            "choiceTemplates": [
              {
                "id": "watch_carefully",
                "actionTextTemplate": "Watch the Situation Carefully",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "logicType": "Simple",
                  "numericRequirement": null,
                  "compoundRequirements": []
                },
                "costTemplate": {
                  "resolve": 0,
                  "coins": 0,
                  "timeSegments": 1
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 1,
                  "timeSegments": 0,
                  "bondChanges": [],
                  "scaleShifts": [
                    {
                      "scaleType": "Caution",
                      "delta": 1
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              },
              {
                "id": "position_near_elena",
                "actionTextTemplate": "Move Closer to the Bar",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "logicType": "Simple",
                  "numericRequirement": null,
                  "compoundRequirements": []
                },
                "costTemplate": {
                  "resolve": 0,
                  "coins": 0,
                  "timeSegments": 1
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 1,
                  "timeSegments": 0,
                  "bondChanges": [],
                  "scaleShifts": [
                    {
                      "scaleType": "Lawfulness",
                      "delta": 1
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              }
            ]
          },
          {
            "id": "harassment_begins",
            "type": "Normal",
            "narrativeTemplate": "The drunk grabs Elena's wrist as she pours. 'Pretty thing, aren't you?' His smile is ugly.\n\nElena pulls free, professional calm barely holding. Other patrons look away. Nobody wants this fight.",
            "priority": 100,
            "narrativeHints": {
              "tone": "threatening",
              "theme": "intimidation",
              "context": "harassment",
              "style": "visceral"
            },
            "choiceTemplates": [
              {
                "id": "speak_to_drunk",
                "actionTextTemplate": "Try to De-escalate with Words",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "logicType": "Simple",
                  "numericRequirement": null,
                  "compoundRequirements": []
                },
                "costTemplate": {
                  "resolve": 1,
                  "coins": 0,
                  "timeSegments": 1
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [],
                  "scaleShifts": [
                    {
                      "scaleType": "Method",
                      "delta": 1
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              },
              {
                "id": "assess_threat",
                "actionTextTemplate": "Assess His Weaknesses",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "logicType": "Simple",
                  "numericRequirement": null,
                  "compoundRequirements": []
                },
                "costTemplate": {
                  "resolve": 1,
                  "coins": 0,
                  "timeSegments": 1
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [],
                  "scaleShifts": [
                    {
                      "scaleType": "Transparency",
                      "delta": -1
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              }
            ]
          },
          {
            "id": "elena_signals",
            "type": "Normal",
            "narrativeTemplate": "Elena catches your eye. The look is brief but clear: Help. Now.\n\nThe drunk is standing now, swaying, blocking her path. His friends at the table laugh nervously.",
            "priority": 100,
            "narrativeHints": {
              "tone": "urgent",
              "theme": "escalation",
              "context": "decision point",
              "style": "sparse"
            },
            "choiceTemplates": [
              {
                "id": "stand_with_authority",
                "actionTextTemplate": "Stand Up and Show You Won't Tolerate This",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "logicType": "Simple",
                  "numericRequirement": null,
                  "compoundRequirements": []
                },
                "costTemplate": {
                  "resolve": 2,
                  "coins": 0,
                  "timeSegments": 0
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [
                    {
                      "npcId": "elena",
                      "bondChange": 1
                    }
                  ],
                  "scaleShifts": [
                    {
                      "scaleType": "Lawfulness",
                      "delta": 1
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              },
              {
                "id": "calm_presence",
                "actionTextTemplate": "Project Calm Confidence",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "logicType": "Simple",
                  "numericRequirement": null,
                  "compoundRequirements": []
                },
                "costTemplate": {
                  "resolve": 2,
                  "coins": 0,
                  "timeSegments": 0
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [
                    {
                      "npcId": "elena",
                      "bondChange": 1
                    }
                  ],
                  "scaleShifts": [
                    {
                      "scaleType": "Method",
                      "delta": 1
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              }
            ]
          },
          {
            "id": "crisis_confrontation",
            "type": "Crisis",
            "narrativeTemplate": "The drunk shoves Elena. Hard.\n\nShe stumbles into tables. Mugs crash. The room goes silent.\n\nHe turns to face you, fists clenched. 'You got something to say?'\n\nThis ends NOW. One way or another.",
            "priority": 100,
            "narrativeHints": {
              "tone": "explosive",
              "theme": "crisis",
              "context": "confrontation",
              "style": "immediate"
            },
            "choiceTemplates": [
              {
                "id": "command_him_down",
                "actionTextTemplate": "Command Him to Leave (Authority 3+)",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "logicType": "Simple",
                  "numericRequirement": {
                    "requirementType": "PlayerScale",
                    "context": "Authority",
                    "comparisonOperator": "GreaterThanOrEqual",
                    "thresholdValue": 3
                  },
                  "compoundRequirements": []
                },
                "costTemplate": {
                  "resolve": 3,
                  "coins": 0,
                  "timeSegments": 1
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [
                    {
                      "npcId": "elena",
                      "bondChange": 5
                    }
                  ],
                  "scaleShifts": [],
                  "stateApplications": [],
                  "achievementIds": ["crisis_resolved_authority"],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              },
              {
                "id": "pay_him_off",
                "actionTextTemplate": "Pay Him to Leave (15 Coins)",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "logicType": "Simple",
                  "numericRequirement": {
                    "requirementType": "Coins",
                    "comparisonOperator": "GreaterThanOrEqual",
                    "thresholdValue": 15
                  },
                  "compoundRequirements": []
                },
                "costTemplate": {
                  "resolve": 0,
                  "coins": 15,
                  "timeSegments": 1
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [
                    {
                      "npcId": "elena",
                      "bondChange": 2
                    }
                  ],
                  "scaleShifts": [
                    {
                      "scaleType": "Fame",
                      "delta": -1
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              },
              {
                "id": "physical_fight",
                "actionTextTemplate": "Fight Him (Physical Challenge)",
                "actionType": "StartChallenge",
                "challengeId": "crisis_brawl",
                "challengeType": "Physical",
                "requirementFormula": {
                  "logicType": "Simple",
                  "numericRequirement": null,
                  "compoundRequirements": []
                },
                "costTemplate": {
                  "resolve": 0,
                  "coins": 0,
                  "timeSegments": 1,
                  "stamina": 2
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [
                    {
                      "npcId": "elena",
                      "bondChange": 3
                    }
                  ],
                  "scaleShifts": [],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              },
              {
                "id": "back_down",
                "actionTextTemplate": "Let Elena Handle It Herself",
                "actionType": "Instant",
                "challengeId": null,
                "challengeType": null,
                "requirementFormula": {
                  "logicType": "Simple",
                  "numericRequirement": null,
                  "compoundRequirements": []
                },
                "costTemplate": {
                  "resolve": 0,
                  "coins": 0,
                  "timeSegments": 1
                },
                "rewardTemplate": {
                  "coins": 0,
                  "resolve": 0,
                  "timeSegments": 0,
                  "bondChanges": [
                    {
                      "npcId": "elena",
                      "bondChange": -5
                    }
                  ],
                  "scaleShifts": [
                    {
                      "scaleType": "Fame",
                      "delta": -2
                    }
                  ],
                  "stateApplications": [],
                  "achievementIds": [],
                  "itemIds": [],
                  "scenesToSpawn": []
                },
                "navigationPayload": null
              }
            ]
          }
        ]
      }
    ]
  }
}
