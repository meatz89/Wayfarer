{
  "packageId": "core_procedural_scenes",
  "metadata": {
    "name": "Procedural Scene Templates - Archetype Demonstration",
    "timestamp": "2025-11-03T00:00:00Z",
    "description": "First procedural SceneTemplate demonstrating archetype-driven choice generation with categorical placement filtering. This template spawns at ANY Mercantile NPC in Commercial locations, not just specific NPCs.",
    "author": "Wayfarer Team",
    "version": "1.0.0"
  },
  "content": {
    "sceneTemplates": [
      {
        "id": "merchant_price_negotiation",
        "archetype": "Linear",
        "displayNameTemplate": "Price Dispute with {NPCName}",
        "introNarrativeTemplate": "The merchant quotes a price that makes you pause. There's room to negotiate here.",
        "tier": 1,
        "isStarter": false,
        "expirationDays": 2,
        "placementFilter": {
          "placementType": "NPC",
          "personalityTypes": ["Mercantile"],
          "minBond": 1,
          "maxBond": 10,
          "npcTags": [],
          "locationProperties": ["Commercial", "Public"],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnConditions": {
          "isAlwaysEligible": false,
          "playerState": {
            "completedScenes": [],
            "choiceHistory": [],
            "minStats": {},
            "requiredItems": [],
            "locationVisits": {}
          },
          "worldState": {
            "weather": null,
            "timeBlock": null,
            "minDay": 2,
            "maxDay": null,
            "locationStates": []
          },
          "entityState": {
            "npcBond": {},
            "locationReputation": {},
            "routeTravelCount": {},
            "properties": []
          },
          "combinationLogic": "AND"
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "initial_offer",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "initial_offer",
            "type": "Normal",
            "archetypeId": "negotiation",
            "narrativeTemplate": null,
            "priority": 100,
            "narrativeHints": {
              "tone": "business-like",
              "theme": "economic_negotiation",
              "context": "merchant_interaction",
              "style": "pragmatic"
            },
            "choiceTemplates": [],
            "autoProgressRewards": null
          }
        ]
      },
      {
        "id": "guard_checkpoint_passage",
        "archetype": "Linear",
        "displayNameTemplate": "Checkpoint with {NPCName}",
        "introNarrativeTemplate": "The guard steps forward, blocking your path with practiced authority.",
        "tier": 2,
        "isStarter": false,
        "expirationDays": 1,
        "placementFilter": {
          "placementType": "NPC",
          "personalityTypes": ["PROUD"],
          "minBond": 0,
          "maxBond": 5,
          "npcTags": [],
          "locationProperties": ["Public", "Checkpoint", "Guarded"],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnConditions": {
          "isAlwaysEligible": false,
          "playerState": {
            "completedScenes": [],
            "choiceHistory": [],
            "minStats": {},
            "requiredItems": [],
            "locationVisits": {}
          },
          "worldState": {
            "weather": null,
            "timeBlock": null,
            "minDay": 3,
            "maxDay": null,
            "locationStates": []
          },
          "entityState": {
            "npcBond": {},
            "locationReputation": {},
            "routeTravelCount": {},
            "properties": []
          },
          "combinationLogic": "AND"
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "checkpoint_stop",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "checkpoint_stop",
            "type": "Normal",
            "archetypeId": "confrontation",
            "narrativeTemplate": null,
            "priority": 100,
            "narrativeHints": {
              "tone": "tense",
              "theme": "authority_confrontation",
              "context": "checkpoint_encounter",
              "style": "direct"
            },
            "choiceTemplates": [],
            "autoProgressRewards": null
          }
        ]
      },
      {
        "id": "local_information_gathering",
        "archetype": "Linear",
        "displayNameTemplate": "Inquiry with {NPCName}",
        "introNarrativeTemplate": "They might know something useful, if approached correctly.",
        "tier": 1,
        "isStarter": false,
        "expirationDays": 3,
        "placementFilter": {
          "placementType": "NPC",
          "personalityTypes": ["MERCANTILE", "DEVOTED"],
          "minBond": 1,
          "maxBond": 10,
          "npcTags": [],
          "locationProperties": ["Public"],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnConditions": {
          "isAlwaysEligible": false,
          "playerState": {
            "completedScenes": [],
            "choiceHistory": [],
            "minStats": {},
            "requiredItems": [],
            "locationVisits": {}
          },
          "worldState": {
            "weather": null,
            "timeBlock": null,
            "minDay": 2,
            "maxDay": null,
            "locationStates": []
          },
          "entityState": {
            "npcBond": {},
            "locationReputation": {},
            "routeTravelCount": {},
            "properties": []
          },
          "combinationLogic": "AND"
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "ask_about_area",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "ask_about_area",
            "type": "Normal",
            "archetypeId": "investigation",
            "narrativeTemplate": null,
            "priority": 100,
            "narrativeHints": {
              "tone": "curious",
              "theme": "information_exchange",
              "context": "casual_inquiry",
              "style": "conversational"
            },
            "choiceTemplates": [],
            "autoProgressRewards": null
          }
        ]
      },
      {
        "id": "noble_favor_exchange",
        "archetype": "Linear",
        "displayNameTemplate": "Request from {NPCName}",
        "introNarrativeTemplate": "The noble regards you with calculated interest. Favors are the currency of their world.",
        "tier": 2,
        "isStarter": false,
        "expirationDays": 2,
        "placementFilter": {
          "placementType": "NPC",
          "personalityTypes": ["Cunning", "PROUD"],
          "minBond": 3,
          "maxBond": 10,
          "npcTags": [],
          "locationProperties": ["Private", "Noble"],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnConditions": {
          "isAlwaysEligible": false,
          "playerState": {
            "completedScenes": [],
            "choiceHistory": [],
            "minStats": {},
            "requiredItems": [],
            "locationVisits": {}
          },
          "worldState": {
            "weather": null,
            "timeBlock": null,
            "minDay": 5,
            "maxDay": null,
            "locationStates": []
          },
          "entityState": {
            "npcBond": {},
            "locationReputation": {},
            "routeTravelCount": {},
            "properties": []
          },
          "combinationLogic": "AND"
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "favor_proposition",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "favor_proposition",
            "type": "Normal",
            "archetypeId": "social_maneuvering",
            "narrativeTemplate": null,
            "priority": 100,
            "narrativeHints": {
              "tone": "calculating",
              "theme": "social_capital",
              "context": "noble_politics",
              "style": "formal"
            },
            "choiceTemplates": [],
            "autoProgressRewards": null
          }
        ]
      },
      {
        "id": "emergency_location_crisis",
        "archetype": "Linear",
        "displayNameTemplate": "Emergency at {LocationName}",
        "introNarrativeTemplate": "Urgent situation demanding immediate action. No time for hesitation.",
        "tier": 3,
        "isStarter": false,
        "expirationDays": 1,
        "placementFilter": {
          "placementType": "Location",
          "personalityTypes": [],
          "minBond": null,
          "maxBond": null,
          "npcTags": [],
          "locationProperties": ["Public"],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnConditions": {
          "isAlwaysEligible": false,
          "playerState": {
            "completedScenes": [],
            "choiceHistory": [],
            "minStats": {},
            "requiredItems": [],
            "locationVisits": {}
          },
          "worldState": {
            "weather": null,
            "timeBlock": null,
            "minDay": 7,
            "maxDay": null,
            "locationStates": []
          },
          "entityState": {
            "npcBond": {},
            "locationReputation": {},
            "routeTravelCount": {},
            "properties": []
          },
          "combinationLogic": "AND"
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "crisis_response",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "crisis_response",
            "type": "Normal",
            "archetypeId": "crisis",
            "narrativeTemplate": null,
            "priority": 100,
            "narrativeHints": {
              "tone": "urgent",
              "theme": "emergency_response",
              "context": "time_pressure",
              "style": "tense"
            },
            "choiceTemplates": [],
            "autoProgressRewards": null
          }
        ]
      },
      {
        "id": "warehouse_access_request",
        "archetype": "Linear",
        "displayNameTemplate": "Warehouse Access with {NPCName}",
        "introNarrativeTemplate": "The warehouse keeper eyes you skeptically. Access isn't freely granted.",
        "tier": 1,
        "isStarter": false,
        "expirationDays": 2,
        "placementFilter": {
          "placementType": "NPC",
          "personalityTypes": ["MERCANTILE"],
          "minBond": 0,
          "maxBond": 5,
          "npcTags": [],
          "locationProperties": ["Commercial"],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnConditions": {
          "isAlwaysEligible": false,
          "playerState": {
            "completedScenes": [],
            "choiceHistory": [],
            "minStats": {},
            "requiredItems": [],
            "locationVisits": {}
          },
          "worldState": {
            "weather": null,
            "timeBlock": null,
            "minDay": 2,
            "maxDay": null,
            "locationStates": []
          },
          "entityState": {
            "npcBond": {},
            "locationReputation": {},
            "routeTravelCount": {},
            "properties": []
          },
          "combinationLogic": "AND"
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "access_request",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "access_request",
            "type": "Normal",
            "archetypeId": "negotiation",
            "narrativeTemplate": null,
            "priority": 100,
            "narrativeHints": {
              "tone": "business-like",
              "theme": "access_control",
              "context": "warehouse_security",
              "style": "direct"
            },
            "choiceTemplates": [],
            "autoProgressRewards": null
          }
        ]
      },
      {
        "id": "suspicious_activity_report",
        "archetype": "Linear",
        "displayNameTemplate": "Suspicious Activity at {LocationName}",
        "introNarrativeTemplate": "Something isn't right here. The pieces don't fit together.",
        "tier": 2,
        "isStarter": false,
        "expirationDays": 2,
        "placementFilter": {
          "placementType": "Location",
          "personalityTypes": [],
          "minBond": null,
          "maxBond": null,
          "npcTags": [],
          "locationProperties": ["Public", "Commercial"],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnConditions": {
          "isAlwaysEligible": false,
          "playerState": {
            "completedScenes": [],
            "choiceHistory": [],
            "minStats": {},
            "requiredItems": [],
            "locationVisits": {}
          },
          "worldState": {
            "weather": null,
            "timeBlock": null,
            "minDay": 4,
            "maxDay": null,
            "locationStates": []
          },
          "entityState": {
            "npcBond": {},
            "locationReputation": {},
            "routeTravelCount": {},
            "properties": []
          },
          "combinationLogic": "AND"
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "investigate_activity",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "investigate_activity",
            "type": "Normal",
            "archetypeId": "investigation",
            "narrativeTemplate": null,
            "priority": 100,
            "narrativeHints": {
              "tone": "suspicious",
              "theme": "mystery_discovery",
              "context": "investigation",
              "style": "observant"
            },
            "choiceTemplates": [],
            "autoProgressRewards": null
          }
        ]
      },
      {
        "id": "community_reputation_building",
        "archetype": "Linear",
        "displayNameTemplate": "Community Standing",
        "introNarrativeTemplate": "Building trust with the locals requires more than just words.",
        "tier": 1,
        "isStarter": false,
        "expirationDays": 3,
        "placementFilter": {
          "placementType": "Location",
          "personalityTypes": [],
          "minBond": null,
          "maxBond": null,
          "npcTags": [],
          "locationProperties": ["Public"],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnConditions": {
          "isAlwaysEligible": false,
          "playerState": {
            "completedScenes": [],
            "choiceHistory": [],
            "minStats": {},
            "requiredItems": [],
            "locationVisits": {}
          },
          "worldState": {
            "weather": null,
            "timeBlock": null,
            "minDay": 3,
            "maxDay": null,
            "locationStates": []
          },
          "entityState": {
            "npcBond": {},
            "locationReputation": {},
            "routeTravelCount": {},
            "properties": []
          },
          "combinationLogic": "AND"
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "build_trust",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "build_trust",
            "type": "Normal",
            "archetypeId": "social_maneuvering",
            "narrativeTemplate": null,
            "priority": 100,
            "narrativeHints": {
              "tone": "friendly",
              "theme": "reputation_building",
              "context": "community_relations",
              "style": "approachable"
            },
            "choiceTemplates": [],
            "autoProgressRewards": null
          }
        ]
      },
      {
        "id": "trade_route_dispute",
        "archetype": "Linear",
        "displayNameTemplate": "Trade Dispute with {NPCName}",
        "introNarrativeTemplate": "Competing interests clash over access to the trade route.",
        "tier": 2,
        "isStarter": false,
        "expirationDays": 2,
        "placementFilter": {
          "placementType": "NPC",
          "personalityTypes": ["Mercantile", "Cunning"],
          "minBond": 0,
          "maxBond": 5,
          "npcTags": [],
          "locationProperties": ["Commercial"],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnConditions": {
          "isAlwaysEligible": false,
          "playerState": {
            "completedScenes": [],
            "choiceHistory": [],
            "minStats": {},
            "requiredItems": [],
            "locationVisits": {}
          },
          "worldState": {
            "weather": null,
            "timeBlock": null,
            "minDay": 4,
            "maxDay": null,
            "locationStates": []
          },
          "entityState": {
            "npcBond": {},
            "locationReputation": {},
            "routeTravelCount": {},
            "properties": []
          },
          "combinationLogic": "AND"
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "resolve_dispute",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "resolve_dispute",
            "type": "Normal",
            "archetypeId": "confrontation",
            "narrativeTemplate": null,
            "priority": 100,
            "narrativeHints": {
              "tone": "contentious",
              "theme": "economic_conflict",
              "context": "trade_dispute",
              "style": "aggressive"
            },
            "choiceTemplates": [],
            "autoProgressRewards": null
          }
        ]
      },
      {
        "id": "missing_goods_inquiry",
        "archetype": "Linear",
        "displayNameTemplate": "Missing Shipment Investigation",
        "introNarrativeTemplate": "Goods have vanished. Someone knows what happened.",
        "tier": 2,
        "isStarter": false,
        "expirationDays": 2,
        "placementFilter": {
          "placementType": "Location",
          "personalityTypes": [],
          "minBond": null,
          "maxBond": null,
          "npcTags": [],
          "locationProperties": ["Commercial"],
          "locationTags": [],
          "terrainTypes": [],
          "districtId": null,
          "regionId": null,
          "routeTier": null,
          "requiredStates": [],
          "forbiddenStates": [],
          "requiredAchievements": [],
          "scaleRequirements": []
        },
        "spawnConditions": {
          "isAlwaysEligible": false,
          "playerState": {
            "completedScenes": [],
            "choiceHistory": [],
            "minStats": {},
            "requiredItems": [],
            "locationVisits": {}
          },
          "worldState": {
            "weather": null,
            "timeBlock": null,
            "minDay": 3,
            "maxDay": null,
            "locationStates": []
          },
          "entityState": {
            "npcBond": {},
            "locationReputation": {},
            "routeTravelCount": {},
            "properties": []
          },
          "combinationLogic": "AND"
        },
        "spawnRules": {
          "pattern": "Linear",
          "initialSituationId": "investigate_missing_goods",
          "transitions": [],
          "completionCondition": null
        },
        "situationTemplates": [
          {
            "id": "investigate_missing_goods",
            "type": "Normal",
            "archetypeId": "investigation",
            "narrativeTemplate": null,
            "priority": 100,
            "narrativeHints": {
              "tone": "investigative",
              "theme": "mystery_solving",
              "context": "theft_investigation",
              "style": "methodical"
            },
            "choiceTemplates": [],
            "autoProgressRewards": null
          }
        ]
      }
    ]
  }
}
