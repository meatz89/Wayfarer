[
  {
    "id": "wayfarer_tutorial",
    "name": "From Destitute to Patronage",
    "description": "Learn the ways of a Wayfarer through 10 days of guided survival",
    "introductionMessage": "You wake on cold stone, stomach cramping from hunger. You have 3 coins - enough for one meal. But when?",
    "completionMessage": "Tutorial Complete: You've learned to survive through relationships, obligations, and difficult choices. Your journey as a Wayfarer truly begins now.",
    "startingConditions": {
      "playerCoins": 3,
      "playerStamina": 5,
      "startingLocation": "lower_ward",
      "startingSpot": "abandoned_warehouse",
      "clearInventory": true,
      "clearLetterQueue": true,
      "clearObligations": true
    },
    "steps": [
      {
        "id": "leave_warehouse",
        "name": "Leave the Warehouse",
        "description": "Travel to Lower Ward Square",
        "requiredLocation": "lower_ward",
        "allowedActions": ["Rest", "Converse"],
        "guidanceText": "Click on the map to travel to Lower Ward Square. Each movement takes time.",
        "completionFlag": "tutorial_first_movement"
      },
      {
        "id": "meet_tam",
        "name": "Meet Tam",
        "description": "Talk to Tam the Beggar",
        "requiredAction": "Converse",
        "requiredNPC": "tam_beggar",
        "guidanceText": "NPCs give information. Remember what they tell you.",
        "conversationIntroduction": "New to the gutters? Word of advice - Martha at the docks sometimes has work. Hard labor, but honest coin.",
        "completionFlag": "tutorial_tam_conversation"
      },
      {
        "id": "travel_to_docks",
        "name": "Go to Millbrook Docks",
        "description": "Travel to the docks to find work",
        "requiredLocation": "docks",
        "guidanceText": "Travel between districts takes 1 hour. Click on Docks on the map.",
        "completionFlag": "tutorial_docks_visited"
      },
      {
        "id": "martha_not_available",
        "name": "Martha Not Available",
        "description": "Martha is not here in the afternoon. Return tomorrow morning.",
        "requiredLocation": "docks",
        "allowedActions": ["Rest", "Browse"],
        "guidanceText": "NPCs have schedules. Martha works mornings only. Rest until tomorrow.",
        "completionFlag": "tutorial_schedule_learned"
      },
      {
        "id": "survival_choice",
        "name": "Eat or Save Money",
        "description": "Decide whether to spend your last coins on food",
        "requiredAction": "Rest",
        "allowedActions": ["Rest", "Trade"],
        "guidanceText": "Your stomach gnaws at you. Spend your last coins on food?",
        "completionFlag": "tutorial_day1_complete"
      },
      {
        "id": "morning_docks",
        "name": "Go to Docks in Morning",
        "description": "Travel to docks to meet Martha",
        "requiredAction": "Converse",
        "requiredLocation": "millbrook_docks",
        "requiredNPC": "martha_docks",
        "conversationIntroduction": "You look desperate. I'll give you a chance. Work hard, and there might be more.",
        "completionFlag": "tutorial_martha_met"
      },
      {
        "id": "first_work",
        "name": "Load Cargo",
        "description": "Work for Martha at the docks",
        "requiredAction": "Work",
        "requiredNPC": "martha_docks",
        "guidanceText": "Work trades stamina for coins.",
        "completionFlag": "first_token_earned"
      },
      {
        "id": "meet_elena",
        "name": "Meet Elena",
        "description": "Encounter Elena in the Lower Ward",
        "requiredAction": "Converse",
        "requiredLocation": "lower_ward_square",
        "requiredNPC": "elena_scribe",
        "conversationIntroduction": "You're new. I... I used to have work copying letters. Before the fire destroyed my master's shop.",
        "completionFlag": "tutorial_elena_met"
      },
      {
        "id": "martha_letter_offer",
        "name": "Martha's Package",
        "description": "Talk to Martha about letter delivery",
        "requiredAction": "Converse",
        "requiredNPC": "martha_docks",
        "conversationIntroduction": "You've been reliable. I have a package for the fishmonger. Just a small thing. 2 coins on delivery. Want it?",
        "guidanceText": "NPCs with tokens offer letter opportunities!",
        "completionFlag": "first_letter_accepted"
      },
      {
        "id": "collect_package",
        "name": "Collect the Package",
        "description": "Collect Martha's package for delivery",
        "requiredAction": "Collect",
        "conversationIntroduction": "Here's the package. Fish oil. Don't drop it.",
        "guidanceText": "Letters must be collected before delivery. They take inventory space.",
        "completionFlag": "first_letter_collected"
      },
      {
        "id": "deliver_fishmonger",
        "name": "Deliver to Fishmonger",
        "description": "Deliver the package to the fishmonger",
        "requiredAction": "Deliver",
        "guidanceText": "You can only deliver the letter in position 1.",
        "completionFlag": "first_letter_delivered"
      },
      {
        "id": "elena_excited",
        "name": "Elena's Discovery",
        "description": "Talk to Elena about new opportunities",
        "requiredAction": "Converse",
        "requiredNPC": "elena_scribe",
        "conversationIntroduction": "I overheard the fishmonger. He needs someone to carry messages to other merchants. He mentioned you!",
        "completionFlag": "tutorial_day3_complete"
      },
      {
        "id": "fishmonger_letter",
        "name": "Fishmonger's Letter",
        "description": "Accept letter from fishmonger",
        "requiredAction": "Converse",
        "requiredNPC": "fishmonger",
        "guidanceText": "Your letter queue shows delivery priority.",
        "completionFlag": "fishmonger_letter_accepted"
      },
      {
        "id": "martha_emergency",
        "name": "Martha's Emergency",
        "description": "Martha has urgent medicine for her daughter",
        "requiredAction": "Converse",
        "requiredNPC": "martha_docks",
        "conversationIntroduction": "Emergency! Medicine for my sick daughter. Only 1 day to deliver!",
        "guidanceText": "Urgent letters from people with leverage enter higher in queue.",
        "completionFlag": "tutorial_queue_crisis"
      },
      {
        "id": "elena_desperate",
        "name": "Elena's Plea",
        "description": "Elena begs you to help Martha",
        "requiredAction": "Converse",
        "requiredNPC": "elena_scribe",
        "conversationIntroduction": "Martha's daughter is dying! There must be something you can do!",
        "guidanceText": "The queue forces impossible choices.",
        "completionFlag": "tutorial_token_burning_learned"
      },
      {
        "id": "elena_loan",
        "name": "Elena's Offer",
        "description": "Elena offers to loan you money",
        "requiredAction": "Converse",
        "requiredNPC": "elena_scribe",
        "conversationIntroduction": "I have 5 coins saved. You can borrow them, but... I need them back someday.",
        "guidanceText": "You can go into token debt. Negative tokens mean they have leverage over you.",
        "completionFlag": "tutorial_debt_introduced"
      },
      {
        "id": "tam_returns",
        "name": "Tam's Observation",
        "description": "Tam notices your struggles",
        "requiredAction": "Converse",
        "requiredNPC": "tam_beggar",
        "conversationIntroduction": "I've been watching you. You're drowning. But sometimes... sometimes people notice those who help others despite having nothing.",
        "completionFlag": "tutorial_tam_prophecy"
      },
      {
        "id": "mysterious_letter",
        "name": "A Mysterious Letter",
        "description": "Elena brings you a mysterious letter",
        "requiredAction": "Converse",
        "requiredNPC": "elena_scribe",
        "conversationIntroduction": "A courier left this for you. Real parchment. Wax seal. Who do you know with money?",
        "guidanceText": "Some letters carry special significance.",
        "completionFlag": "tutorial_patron_letter_received"
      },
      {
        "id": "merchant_rest_inn",
        "name": "Go to Merchant's Rest Inn",
        "description": "Travel to the inn to meet your mysterious contact",
        "requiredAction": "Rest",
        "requiredLocation": "middle_ward_inn",
        "guidanceText": "Your determination to deliver that medicine despite personal cost shows character.",
        "completionFlag": "tutorial_inn_reached"
      },
      {
        "id": "meet_intermediary",
        "name": "The Patron's Offer",
        "description": "Meet with the Patron's intermediary",
        "requiredAction": "Converse",
        "requiredNPC": "patron_intermediary",
        "conversationIntroduction": "My employer values discretion and loyalty above all else. They offer patronage - monthly funds, equipment when needed, protection. In exchange, you carry their letters when asked. These letters take priority above all others. Do you accept?",
        "guidanceText": "Standing Obligations permanently modify game rules.",
        "completionFlag": "patron_contact_met",
        "obligationToCreate": {
          "id": "patron_obligation",
          "name": "Patron's Service",
          "description": "You are bound to carry your patron's letters with absolute priority. In return, you receive monthly support and protection.",
          "sourceNpcId": "patron_intermediary",
          "relatedTokenType": "Noble",
          "benefitEffects": ["PatronMonthly", "PatronJumpToTop"],
          "constraintEffects": ["PatronAbsolute"]
        }
      },
      {
        "id": "first_patron_letter",
        "name": "Your First Task",
        "description": "Receive your first patron letter",
        "requiredAction": "Converse",
        "requiredNPC": "patron_intermediary",
        "conversationIntroduction": "Your first task. Deliver this to the Harbor Master. Tell no one of its contents. You have three days.",
        "guidanceText": "Your patron's needs now take precedence over all others.",
        "completionFlag": "tutorial_patron_letter_accepted"
      },
      {
        "id": "elena_warning",
        "name": "Elena's Warning",
        "description": "Elena finds you after your transformation",
        "requiredAction": "Converse",
        "requiredNPC": "elena_scribe",
        "conversationIntroduction": "You look... different. Found a patron, didn't you? Be careful. I've seen what happens to those who can't balance their obligations.",
        "guidanceText": "You've learned to survive through relationships, obligations, and difficult choices. But patronage brings its own chains. Your queue will never be simple again.",
        "completionFlag": "tutorial_completed"
      }
    ],
    "rewards": {
      "coins": 20,
      "stamina": 10,
      "message": "You've survived your first days as a Wayfarer!"
    },
    "restrictedNPCs": ["patron_intermediary", "guild_merchant", "noble_contact", "shadow_dealer"]
  }
]