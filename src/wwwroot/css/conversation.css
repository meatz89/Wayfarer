/* ===== WAYFARER CONVERSATION SYSTEM CSS ===== */
/* Complete styling for card-based conversations */

/* Global font family */
body {
    font-family: 'Garamond', 'Georgia', serif;
}

/* === CONVERSATION LAYOUT === */

/* Main conversation content container - no scrolling (handled by GameScreen) */
.conversation-content {
    position: relative;
}

/* Location Context */
.location-context {
    background: #f9f3e9;
    padding: 8px 20px;
    border-bottom: 1px solid #c4a684;
    font-size: 11px;
    color: #7a6250;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.conversation-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* Header with deadline */
.conversation-header {
    background: #2c241a;
    color: #e8dcc4;
    padding: 10px 20px;
    border-bottom: 2px solid #5c4a3a;
    display: flex;
    justify-content: space-between;
    font-size: 13px;
}

.deadline-warning {
    color: #d4704a;
    font-weight: bold;
}

/* NPC Bar - separate from state */
.npc-bar {
    background: linear-gradient(to bottom, #f4e8d0, #e8dcc4);
    padding: 15px 20px;
    border-bottom: 2px solid #a68b6f;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Personality Rule Display */
.personality-rule {
    background: #fff8e7;
    padding: 8px 15px;
    margin: 10px 20px;
    border-left: 4px solid #d4a574;
    font-size: 13px;
}

.personality-rule .rule-label {
    font-weight: 600;
    color: #6a5442;
    margin-right: 8px;
}

.personality-rule .rule-description {
    color: #8a7464;
    font-style: italic;
}

/* State and Flow grouped together */
.state-flow-section {
    background: #f9f3e9;
    padding: 12px 20px;
    border-bottom: 2px solid #c4a684;
    display: flex;
    justify-content: space-between;
    gap: 30px;
    align-items: center;
    width: 100%;
}

.npc-info {
}

.npc-name {
    color: #5c4a3a;
    font-size: 22px;
    font-weight: normal;
}

.npc-status {
    font-size: 12px;
    color: #7a6250;
    margin-top: 2px;
}

.emotional-state {
    display: flex;
    align-items: center;
    gap: 12px;
}

.state-label {
    font-size: 11px;
    color: #7a6250;
    text-transform: uppercase;
}

.state-name {
    font-size: 16px;
    font-weight: bold;
    color: #8b4726;
}

.state-effects {
    font-size: 11px;
    color: #7a6250;
}

/* === RESOURCE INDICATORS === */

/* Doubt Display */
.doubt-display {
    flex: 1;
    justify-items: flex-end;
    text-align: right;
}

.doubt-label {
    font-size: 10px;
    color: #7a6250;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.doubt-value {
    font-size: 20px;
    font-weight: bold;
    color: #8b4726;
}

/* Flow Display */
.flow-display {
    display: flex;
    align-items: center;
    gap: 10px;
}

.flow-label {
    font-size: 11px;
    color: #7a6250;
    text-transform: uppercase;
}

.flow-bar {
    display: flex;
    gap: 3px;
    align-items: center;
}

.flow-segment {
    width: 16px;
    height: 28px;
    border: 2px solid #5c4a3a;
    background: #2c241a;
    transition: all 0.2s ease;
}

.flow-segment.active {
    background: #d4a76a;
    border-color: #8b7355;
    box-shadow: 0 0 6px rgba(212, 167, 106, 0.4);
}

.flow-segment.inactive {
    background: #3d3429;
    border-color: #5c4a3a;
    opacity: 0.6;
}

.flow-value {
    font-size: 16px;
    font-weight: bold;
    color: #5c4a3a;
}

.flow-hint {
    font-size: 10px;
    color: #8b4726;
    margin-left: 10px;
}

.flow-warning {
    font-size: 11px;
    color: #d4704a;
    font-weight: bold;
    margin-left: 10px;
}

/* Focus Display Above Cards */
.focus-display-section {
    background: #3d3429;
    padding: 12px 25px;
    border-bottom: 1px solid #d4c5a0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.focus-content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
}

/* Focus Bar - dark background with golden elements like mockup */
.focus-bar {
    background: #3d3429;
    padding: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
}

.focus-label {
    font-size: 11px;
    color: #e8dcc4;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.focus-dots {
    display: flex;
    gap: 5px;
    align-items: center;
    justify-content: center;
}

.focus-dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    border: 1px solid #8b7355;
    background: #2c241a;
}

.focus-dot.available {
    background: #d4a76a;
    border-color: #d4a76a;
}

.focus-numbers {
    font-size: 13px;
    color: #d4a76a;
    font-weight: bold;
}

.focus-note {
    font-size: 10px;
    color: #8b7355;
    text-align: center;
}

.focus-dot.spent {
    background: #3d3429;
}

.focus-numbers {
    font-size: 18px;
    font-weight: bold;
    color: #d4a76a;
}

.focus-value {
    font-size: 16px;
    font-weight: bold;
    color: #d4a76a;
}

.focus-warning {
    font-size: 10px;
    color: #d4704a;
    font-style: italic;
}

.focus-note {
    font-size: 11px;
    color: #8b7355;
    font-style: italic;
    margin-left: auto;
}

/* === ATMOSPHERE AND RAPPORT BAR === */

.atmosphere-rapport-bar {
    background: #e8dcc4;
    padding: 10px 20px;
    border-bottom: 1px solid #c4a684;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.atmosphere-display {
    display: flex;
    align-items: center;
    gap: 10px;
}

.atmosphere-label {
    font-size: 11px;
    color: #7a6250;
    text-transform: uppercase;
}

.atmosphere-current {
    font-size: 14px;
    color: #5c4a3a;
    font-weight: bold;
}

.atmosphere-effect {
    font-size: 11px;
    color: #7a6250;
    font-style: italic;
}

/* Atmosphere-specific color schemes */
.atmosphere-neutral { 
    opacity: 0.6; 
}

.atmosphere-prepared { 
    border-color: #2e8b57;
    background: linear-gradient(135deg, #e6f5ed, #c8e6d3);
}

.atmosphere-receptive { 
    border-color: #4169e1;
    background: linear-gradient(135deg, #e6eef9, #c8d9f3);
}

.atmosphere-focused { 
    border-color: #ff8c00;
    background: linear-gradient(135deg, #fff4e6, #ffe4c8);
}

.atmosphere-patient { 
    border-color: #9370db;
    background: linear-gradient(135deg, #f2ecfb, #e3d3f5);
}

.atmosphere-volatile { 
    border-color: #dc143c;
    background: linear-gradient(135deg, #fbe6ea, #f5c8d0);
}

.atmosphere-final { 
    border-color: #8b0000;
    background: linear-gradient(135deg, #f5e6e6, #e6c8c8);
}

.atmosphere-informed { 
    border-color: #ffd700;
    background: linear-gradient(135deg, #fffacd, #fff4a3);
}

.atmosphere-exposed { 
    border-color: #ff1493;
    background: linear-gradient(135deg, #ffeef7, #ffc8e3);
}

.atmosphere-synchronized { 
    border-color: #00ced1;
    background: linear-gradient(135deg, #e6feff, #c8f3f4);
}

.atmosphere-pressured { 
    border-color: #b22222;
    background: linear-gradient(135deg, #f5e0e0, #e6c0c0);
}

/* === TOKEN DISPLAY === */

.token-strip {
    display: flex;
    gap: 15px;
    padding: 8px 20px;
    background: #f9f3e9;
    border-top: 1px solid #d4c5a0;
}

.token-item {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.9rem;
}

.token-label {
    color: #7a6250;
}

.token-value {
    font-focus: bold;
    color: #3d3429;
}

/* === CARD STYLES === */

.card {
    background: #faf4ea;
    border: 2px solid #c4a684;
    border-radius: 4px;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.3s ease, opacity 0.15s ease, margin 0.3s ease, max-height 0.3s ease;
    position: relative;
}

.card:hover:not(.disabled):not(.promise) {
    background: #fefaf0;
    border-color: #a68b6f;
    transform: translateX(5px);
}

.card.disabled {
    opacity: 0.4;
    cursor: not-allowed;
    background: #e8dcc4;
}

.card.selected {
    border-color: #5a7a3a;
    box-shadow: 0 0 10px rgba(90, 122, 58, 0.5);
}

/* Promise/Request cards */
.card.promise {
    border-color: #8b4726;
    background: #fff9f0;
}

.card.promise.disabled {
    opacity: 0.5;
    background: #f0ebe4;
}

.card.promise:hover:not(.disabled) {
    border-color: #d4704a;
    transform: translateX(5px);
    background: #fffaf5;
}

.promise-threshold {
    background: #8b4726;
    color: #faf4ea;
    padding: 6px 12px;
    font-size: 12px;
    font-weight: bold;
    text-align: center;
}

.promise-threshold.promise-active {
    background: #5a7a3a;
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 10px;
}

.card-name {
    font-size: 14px;
    font-weight: bold;
    color: #5c4a3a;
}

.card-focus {
    width: 24px;
    height: 24px;
    background: #5c4a3a;
    color: #faf4ea;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 13px;
    line-height: 1;
}

/* Card content flex layout */
.card-content {
    display: flex;
    flex-direction: column;
}

.card-body {
    display: flex;
    flex: 1;
}

/* Card Progression Display (XP and Level) */
.card-progression {
    position: absolute;
    top: 5px;
    right: 5px;
    display: flex;
    gap: 10px;
    font-size: 11px;
    font-weight: 600;
}

.card-level {
    background: linear-gradient(135deg, #f4d03f, #e8b923);
    color: #5c4a3a;
    padding: 2px 8px;
    border-radius: 12px;
    border: 1px solid #d4a574;
}

.card-xp {
    background: rgba(255, 255, 255, 0.9);
    color: #7a6250;
    padding: 2px 8px;
    border-radius: 12px;
    border: 1px solid #c4a684;
}

/* Level-specific visual enhancements */
.card-level-3 {
    box-shadow: 0 0 8px rgba(244, 208, 63, 0.4);
}

.card-level-5 {
    box-shadow: 0 0 12px rgba(244, 208, 63, 0.6);
    border-color: #f4d03f;
}

/* Illegal Play Highlighting */
.card.illegal-play {
    border-color: #d4704a !important;
    background: linear-gradient(to bottom, #faf4ea, #fce8e4);
    position: relative;
}

.card.illegal-play::before {
    content: "ILLEGAL PLAY";
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    background: #d4704a;
    color: white;
    padding: 2px 8px;
    font-size: 10px;
    font-weight: bold;
    border-radius: 3px;
    z-index: 10;
}

.card.illegal-play:hover {
    cursor: not-allowed;
    opacity: 0.7;
}

/* XP Gain Animation */
@keyframes xpGain {
    0% {
        transform: scale(1);
        color: #7a6250;
    }
    50% {
        transform: scale(1.3);
        color: #f4d03f;
        text-shadow: 0 0 8px rgba(244, 208, 63, 0.6);
    }
    100% {
        transform: scale(1);
        color: #7a6250;
    }
}

.card-xp.gaining {
    animation: xpGain 0.6s ease-out;
}

.card-main {
    flex: 1;
    padding: 15px;
}


.card-properties {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    margin-bottom: 8px;
}

.card-tag {
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 10px;
    font-focus: bold;
    text-transform: uppercase;
}

.tag-persistent {
    background: #d4e6d4;
    color: #3a5a3a;
}

/* Persistence Tags - positioned top-right, left of success/failure divs */
.persistence-tag-container {
    position: absolute;
    top: 8px;
    right: calc(30% + 10px); /* Position left of the 30% width success/failure divs */
    display: flex;
    gap: 4px;
    z-index: 5;
}

.persistence-tag {
    display: inline-block;
    padding: 2px 6px;
    border-radius: 2px;
    font-size: 8px;
    text-transform: uppercase;
    font-weight: bold;
}

.persistence-tag.thought {
    background: #7a8b5a;
    color: #faf4ea;
}

.persistence-tag.impulse {
    background: #d4704a;
    color: #faf4ea;
}

.persistence-tag.opening {
    background: #5a7a8a;
    color: #faf4ea;
}

.tag-difficulty-easy {
    background: #d4e6d4;
    color: #3a5a3a;
}

.tag-difficulty-medium {
    background: #f5e6d4;
    color: #8a6a3a;
}

.tag-difficulty-hard {
    background: #f5d4d4;
    color: #8a3a3a;
}

.tag-difficulty-veryhard {
    background: #e6d4f5;
    color: #6a3a8a;
}

.card-text {
    font-size: 13px;
    line-height: 1.5;
    color: #5c4a3a;
    font-style: italic;
    margin-bottom: 10px;
}

/* Effect Tags - positioned below card text like mockup */
.effect-tags {
    position: absolute;
    bottom: 8px;
    left: 12px;
    display: flex;
    gap: 4px;
}

.effect-tag {
    padding: 1px 4px;
    border-radius: 2px;
    font-size: 7px;
    text-transform: uppercase;
    background: #e8dcc4;
    color: #7a6250;
    border: 1px solid #d4c5a0;
}

/* Card outcomes - side by side success/failure */
.card-outcomes {
    display: flex;
    width: 30%;
    border-left: 1px solid #d4c5a0;
}

.outcome {
    padding: 15px;
    width: 140px;
    text-align: center;
    background: #f9f3e9;
}

.outcome.success {
    border-right: 1px solid #d4c5a0;
}

.outcome-chance {
    font-size: 20px;
    font-weight: bold;
    color: #5c4a3a;
    margin-bottom: 4px;
}

.effect-details {
    font-size: 11px;
    color: #5a7a3a;
    font-style: italic;
    margin-bottom: 4px;
}

.outcome.effect-calculation {
    flex: 1;
}

.outcome.impulse-warning {
    background: #fce8e4;
    border: 1px solid #d4704a;
    padding: 8px;
    border-radius: 3px;
}

.outcome-label {
    font-size: 9px;
    text-transform: uppercase;
    color: #7a6250;
    margin-bottom: 6px;
}

.outcome-effect {
    font-size: 11px;
    color: #5c4a3a;
    font-weight: bold;
}

.outcome-modifiers {
    font-size: 10px;
    color: #7a6250;
    margin-top: 4px;
}

/* Exhaust Section for Impulse/Opening Cards - dark strip like mockup */
.exhaust-section {
    background: #3d3429;
    color: #e8dcc4;
    padding: 8px 12px;
    font-size: 10px;
    text-align: center;
    margin-top: auto;
    border-top: 1px solid #2c241a;
}

.exhaust-effect {
    background: #3d3429;
    color: #e8dcc4;
    padding: 8px 12px;
    font-size: 10px;
    text-align: center;
    border-top: 1px solid #2c241a;
}

.exhaust-label {
    font-size: 9px;
    text-transform: uppercase;
    color: #8b7355;
    margin-right: 6px;
}

/* === CARD ANIMATIONS === */

/* Slide in from right for newly drawn cards */
@keyframes card-slide-in {
    from {
        transform: translateX(100px);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Success flash - green highlight */
@keyframes card-success-flash {
    0% {
        background-color: #faf4ea;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    20% {
        background-color: #d4ffd4;
        box-shadow: 0 0 20px rgba(0,255,0,0.5);
        transform: scale(1.05);
    }
    80% {
        background-color: #d4ffd4;
        box-shadow: 0 0 15px rgba(0,255,0,0.3);
        transform: scale(1.02);
    }
    100% {
        background-color: #faf4ea;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        transform: scale(1);
    }
}

/* Failure flash - red highlight */
@keyframes card-failure-flash {
    0% {
        background-color: #faf4ea;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    20% {
        background-color: #ffd4d4;
        box-shadow: 0 0 20px rgba(255,0,0,0.5);
    }
    40% {
    }
    80% {
        background-color: #ffd4d4;
        box-shadow: 0 0 15px rgba(255,0,0,0.3);
    }
    100% {
        background-color: #faf4ea;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
}

/* SIMPLIFIED: Basic fade out for removed cards */
@keyframes card-fade-out {
    0% {
        opacity: 1;
    }
    100% {
        opacity: 0;
    }
}

/* SIMPLIFIED: Basic fade in for new cards */
@keyframes card-fade-in {
    0% {
        opacity: 0;
        transform: scale(0.95);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* Transition out for played cards */
@keyframes card-play-out {
    0% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
    100% {
        transform: translateY(-100px) scale(0.5);
        opacity: 0;
    }
}

/* Newly drawn cards - simple fade in */
.card-new {
    animation: card-fade-in 0.3s ease-out;
}

/* Successfully played card */
.card-played-success {
    animation: card-success-flash 1.25s ease-out, card-play-out 0.25s ease-out 1.25s;
    animation-fill-mode: forwards;
    pointer-events: none;
}

/* Failed played card */
.card-played-failure {
    animation: card-failure-flash 1.25s ease-out, card-play-out 0.25s ease-out 1.25s;
    animation-fill-mode: forwards;
    pointer-events: none;
}

/* Exhausting cards - removed immediately (no animation needed) */

/* === ACTION SECTION === */

.action-section {
    padding: 15px;
    background: #e8dcc4;
    text-align: center;
    border-bottom: 1px solid #a68b6f;
}

.action-choices {
    display: flex;
    justify-content: center;
    gap: 30px;
}

.action-button {
    padding: 12px 40px;
    background: linear-gradient(to bottom, #f9f3e9, #f4e8d0);
    border: 2px solid #a68b6f;
    border-radius: 4px;
    color: #5c4a3a;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.15s ease;
    text-align: center;
    min-width: 180px;
    position: relative;
}

.action-button:hover {
    background: linear-gradient(to bottom, #faf4ea, #f9f3e9);
    border-color: #8b7355;
    transform: translateY(-2px);
}

.action-button:hover .button-preview {
    display: block;
}

.button-preview {
    display: none;
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: #2c241a;
    color: #e8dcc4;
    padding: 8px 12px;
    border-radius: 4px;
    font-size: 10px;
    white-space: pre-line;
    margin-bottom: 5px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    min-width: 150px;
    text-align: left;
}

.action-details {
    font-size: 11px;
    margin-top: 4px;
    color: #7a6250;
}

/* === CARDS SECTION === */

.cards-section {
    padding: 20px;
    background: #f4e8d0;
}

.cards-header {
    text-align: center;
    margin-bottom: 15px;
}

.cards-title {
    font-size: 13px;
    color: #7a6250;
    text-transform: uppercase;
    text-align: center;
    margin-bottom: 15px;
}

.card-grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-width: 900px;
    margin: 0 auto;
    position: relative;
}

/* === CONVERSATION NARRATIVE === */

.narrative-section {
    padding: 25px;
    background: #f4e8d0;
    border-bottom: 2px solid #a68b6f;
}

.narrative-text {
    padding: 15px;
    background: #faf4ea;
    border-radius: 2px;
    font-size: 14px;
    line-height: 1.6;
    color: #5c4a3a;
    margin-bottom: 12px;
}

.npc-dialogue {
    padding: 20px;
    background: #faf4ea;
    border-left: 3px solid #a68b6f;
    border-radius: 2px;
    font-size: 16px;
    line-height: 1.6;
    font-style: italic;
}

.npc-dialogue.disconnected {
    border-left-color: #8b4726;
    background: #faf0e6;
}

/* === SPECIAL CARD TYPES === */

/* Stat-based colored left borders from mockup */
.card.insight {
    border-left: 5px solid #5a7a8a;
}

.card.momentum {
    border-left: 5px solid #7a8b5a;
}

.card.authority {
    border-left: 5px solid #8b4726;
}

.card.commerce {
    border-left: 5px solid #d4a76a;
}

.card.cunning {
    border-left: 5px solid #6a5a8a;
}

.card.flow {
    border-left: 5px solid #7a8b5a;
}

.card.state {
    border-left: 5px solid #8b7355;
}

.card.crisis {
    border-left: 5px solid #8b4726;
    background: #faf0e6;
}

.card.impulse-warning {
    position: relative;
    overflow: visible;
}

.card.impulse-warning::before {
    content: 'âš¡ Will exhaust';
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    background: #ff9800;
    color: white;
    padding: 2px 8px;
    border-radius: 3px;
    font-size: 11px;
    font-focus: bold;
}

/* === MOMENTUM DISPLAY === */

.momentum-display {
    display: flex;
    flex: 1;
    justify-content: flex-start;
    align-items: center;
    gap: 10px;
}

.momentum-label {
    font-size: 11px;
    color: #7a6250;
    text-transform: uppercase;
}

.momentum-value {
    font-size: 20px;
    font-weight: bold;
    color: #5a7a3a;
}

.momentum-effect {
    font-size: 11px;
    color: #5a7a3a;
    font-style: italic;
}
/* ==================== AI-Generated Content Styling ==================== */
/* Visually distinguishes AI-generated narrative from JSON fallback */

/* AI-Generated content - more natural, flowing appearance */
.narrative-text.ai-generated,
.npc-dialogue.ai-generated {
    position: relative;
    background: linear-gradient(135deg, #faf4ea 0%, #f5ede0 100%);
    border-left: 3px solid #8a7a6a;
}

.narrative-text.ai-generated::before,
.npc-dialogue.ai-generated::before {
    content: "AI";
    position: absolute;
    top: -8px;
    right: 10px;
    padding: 2px 6px;
    background: #8a7a6a;
    color: #faf4ea;
    font-size: 9px;
    font-weight: bold;
    border-radius: 2px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* JSON Fallback content - more structured, template-like appearance */
.narrative-text.json-fallback,
.npc-dialogue.json-fallback {
    position: relative;
    background: #f5f0e8;
    border-left: 3px solid #6a7a8a;
}

.narrative-text.json-fallback::before,
.npc-dialogue.json-fallback::before {
    content: "TEMPLATE";
    position: absolute;
    top: -8px;
    right: 400px;
    padding: 2px 6px;
    background: #6a7a8a;
    color: #faf4ea;
    font-size: 9px;
    font-weight: bold;
    border-radius: 2px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Card AI/Template flags - positioned on card level */
.card.ai-generated::after {
    content: "AI";
    position: absolute;
    top: 8px;
    right: 10px;
    padding: 2px 6px;
    background: #8a7a6a;
    color: #faf4ea;
    font-size: 9px;
    font-weight: bold;
    border-radius: 2px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    z-index: 10;
}

.card.json-fallback::after {
    content: "TEMPLATE";
    position: absolute;
    top: 8px;
    right: 400px;
    padding: 2px 6px;
    background: #6a7a8a;
    color: #faf4ea;
    font-size: 9px;
    font-weight: bold;
    border-radius: 2px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    z-index: 10;
}

/* Loading state for narrative while AI is generating */
.narrative-text.narrative-loading,
.npc-dialogue.narrative-loading {
    opacity: 0.8;
    animation: narrativeLoading 2s ease-in-out infinite;
}

@keyframes narrativeLoading {
    0%, 100% {
        opacity: 0.8;
    }
    50% {
        opacity: 0.6;
    }
}

/* Subtle animation for AI content to indicate dynamic generation */
.narrative-text.ai-generated,
.npc-dialogue.ai-generated {
    animation: aiGlow 3s ease-in-out infinite;
    transition: opacity 0.3s ease-in, background 0.3s ease-in;
}

@keyframes aiGlow {
    0%, 100% {
        box-shadow: 0 2px 4px rgba(138, 122, 106, 0.1);
    }
    50% {
        box-shadow: 0 2px 8px rgba(138, 122, 106, 0.2);
    }
}

/* === NEW UI ELEMENTS FROM MOCKUP === */

/* Player Stats Display */
.stats-display {
    background: #3d3429;
    padding: 10px 20px;
    border-bottom: 1px solid #5c4a3a;
    display: flex;
    justify-content: center;
    gap: 25px;
}

.stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.stat-name {
    font-size: 10px;
    color: #8b7355;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

.stat-level {
    font-size: 18px;
    font-weight: bold;
    color: #d4a76a;
}

.stat-xp {
    font-size: 9px;
    color: #7a6250;
}

/* Personality Badge */
.personality-badge {
    padding: 8px 12px;
    background: #8b4726;
    color: #faf4ea;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Win/Lose Conditions Bar */
.conditions-bar {
    background: #f9f3e9;
    padding: 12px 20px;
    border-bottom: 1px solid #c4a684;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Doubt Slots */
.doubt-slots {
    display: flex;
    gap: 4px;
}

.doubt-slot {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 1px solid #8b7355;
    background: #e8dcc4;
}

.doubt-slot.filled {
    background: #8b4726;
    border-color: #d4704a;
}

.doubt-slot.empty {
    background: #e8dcc4;
    border-color: #8b7355;
}

/* Momentum Counter */
.momentum-counter {
    font-size: 28px;
    font-weight: bold;
    color: #5a7a3a;
    min-width: 50px;
    text-align: center;
}

.momentum-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.momentum-label {
    font-size: 10px;
    color: #7a6250;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Flow State Bar */
.flow-state-bar {
    background: #2c241a;
    padding: 10px 15px;
    border-bottom: 2px solid #5c4a3a;
}

/* Flow State Wrapper - Centers the flow visualization */
.flow-state-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    flex: 1;
}

.flow-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.flow-negative {
    display: flex;
    gap: 4px;
    flex-direction: row-reverse;
}

.flow-positive {
    display: flex;
    gap: 4px;
}

.current-state {
    background: #e8dcc4;
    border: 2px solid #8b7355;
    border-radius: 4px;
    padding: 8px 20px;
    min-width: 200px;
    text-align: center;
}

.current-state .state-rules {
    font-size: 11px;
    color: #7a6250;
    margin-top: 4px;
}

.state-name {
    font-size: 14px;
    font-weight: bold;
    color: #5c4a3a;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Goals Section */
.goals-section {
    background: #e8dcc4;
    padding: 10px 15px;
    border-bottom: 2px solid #a68b6f;
}

.goals-header {
    font-size: 11px;
    color: #7a6250;
    text-transform: uppercase;
    text-align: center;
    margin-bottom: 10px;
    letter-spacing: 1px;
}

.goals-container {
    display: flex;
    justify-content: center;
    gap: 15px;
}

.goal-card {
    background: #faf4ea;
    border: 2px solid #c4a684;
    border-radius: 4px;
    padding: 10px;
    min-width: 150px;
    text-align: center;
    transition: all 0.2s;
}

.goal-card.achievable {
    border-color: #7a8b5a;
    background: #f4f9e9;
}

.goal-card.active {
    border-color: #d4a76a;
    transform: scale(1.05);
}

.goal-threshold {
    font-size: 18px;
    font-weight: bold;
    color: #5c4a3a;
    margin-bottom: 4px;
}

.goal-name {
    font-size: 11px;
    color: #7a6250;
    margin-bottom: 4px;
}

.goal-reward {
    font-size: 10px;
    color: #5a7a3a;
    font-weight: bold;
}

/* Stat Badges for Cards */
.stat-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 2px;
    font-size: 10px;
    font-weight: bold;
    text-transform: uppercase;
    margin-bottom: 6px;
}

.stat-badge.insight {
    background: #5a7a8a;
    color: #faf4ea;
}

.stat-badge.momentum {
    background: #7a8b5a;
    color: #faf4ea;
}

.stat-badge.authority {
    background: #8b4726;
    color: #faf4ea;
}

.stat-badge.commerce {
    background: #d4a76a;
    color: #2c241a;
}

.stat-badge.cunning {
    background: #6a5a8a;
    color: #faf4ea;
}

/* XP Gain Indicator for Card Names */
.xp-gain {
    display: inline-block;
    background: #d4a76a;
    color: #2c241a;
    padding: 1px 5px;
    border-radius: 2px;
    font-size: 9px;
    font-weight: bold;
    margin-left: 8px;
}


/* Difficulty Badge */
.difficulty-badge {
    background: #8b4726;
    color: #faf4ea;
    padding: 3px 8px;
    border-radius: 3px;
    font-weight: bold;
    font-size: 11px;
    text-transform: uppercase;
}
