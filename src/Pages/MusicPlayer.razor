@using System
@using System.Timers

<div class="music-player">
    <div class="track-info">
        @if (MusicService.CurrentTrack != null)
        {
            <div class="title">@MusicService.CurrentTrack.Title</div>
            <div class="time-display">
                <span class="current-time">@_formattedCurrentPosition</span>
                <span class="duration-separator">/</span>
                <span class="total-time">@FormatTimeSpan(MusicService.CurrentTrack.Duration)</span>
            </div>
        }
        else
        {
            <div class="title">No track playing</div>
            <div class="time-display">
                <span class="current-time">0:00</span>
                <span class="duration-separator">/</span>
                <span class="total-time">0:00</span>
            </div>
        }
    </div>
    
    <div class="controls">
        <button class="play-pause-btn" @onclick="TogglePlayPauseAsync">
            @if (MusicService.IsPlaying)
            {
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                    <rect x="6" y="4" width="4" height="16" />
                    <rect x="14" y="4" width="4" height="16" />
                </svg>
            }
            else
            {
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                    <polygon points="5,3 19,12 5,21" />
                </svg>
            }
        </button>
        <button class="next-btn" @onclick="NextTrackAsync">
            <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                <polygon points="4,4 14.5,12 4,20" />
                <rect x="16" y="4" width="2" height="16" />
            </svg>
        </button>

    </div>
</div>
