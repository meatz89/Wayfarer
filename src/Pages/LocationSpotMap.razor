@inherits LocationSpotMapBase

@* LocationSpotMap.razor *@

<div class="locations-grid">
    @foreach (LocationSpot spot in GetKnownSpots())
    {
        <div class="@(!spot.IsClosed ? "enabled" : "disabled")">

            <div class="location-card @(spot.SpotID == CurrentSpot.SpotID ? "current" : "reachable")">
                <div class="location-spot-properties">
                    @foreach (var prop in StyleHelper.GetSpotProperties(GetLocation(), spot))
                    {
                        <div class="property-tag @prop.CssClass">
                            <span class="property-icon">@prop.Icon</span>
                            <span class="property-text">@prop.Text</span>
                        </div>
                    }
                </div>
                <div class="location-name">
                    @spot.Name @(spot.IsClosed ? "(Closed)" : "")
                </div>
                <div class="location-type">@spot.Description</div>

                @* NPCs are now shown in NPCActionsView component *@

        @if (spot.SpotID == CurrentSpot.SpotID)
        {
            @* Actions removed - using LocationActionManager and letter queue system *@
                }
                else
                {
                    @* Add travel option if not current spot *@
                    <button class="action-button" disabled="@(!GameWorldManager.CanMoveToSpot(spot.SpotID))"
                            @onclick="() => OnSpotSelected.InvokeAsync(spot)">
                        MOVE HERE
                    </button>
                }
            </div>
        </div>
    }
</div>

@namespace Wayfarer.Pages

@* Action preview removed - location actions handled by LocationActionManager *@
