@inherits InvestigationProgressModalBase
@namespace Wayfarer.Pages.Components

<div class="investigation-notification-container">
    <div class="investigation-header">
        <div class="investigation-icon">üîç</div>
        <div class="investigation-title-section">
            <div class="investigation-main-title">Investigation Progress</div>
            <div class="investigation-subtitle">@Data.InvestigationName</div>
        </div>
    </div>

    <div class="investigation-outcome-section">
        <div class="outcome-text">@Data.OutcomeNarrative</div>

        <div class="goal-completed-box">
            <div class="completed-label">Goal Completed</div>
            <div class="completed-goal-name">@Data.CompletedGoalName</div>
        </div>
    </div>

    @if (Data.NewLeads != null && Data.NewLeads.Count > 0)
    {
        <div class="new-leads-section">
            <div class="new-leads-header">
                <div class="new-leads-icon">‚ú®</div>
                <div class="new-leads-title">New Leads Discovered</div>
            </div>

            <div class="leads-list">
                @foreach (NewLeadInfo lead in Data.NewLeads)
                {
                    <div class="lead-item">
                        <div class="lead-marker"></div>
                        <div class="lead-content">
                            <div class="lead-text">@lead.GoalName</div>
                            <div class="lead-location">Available at: @lead.LocationName - @lead.SpotName</div>
                        </div>
                    </div>
                }
            </div>
        </div>
    }

    <div class="investigation-progress-section">
        <div class="progress-label">Investigation Progress: @Data.InvestigationName</div>
        <div class="progress-bar">
            <div class="progress-fill" style="width: @GetProgressPercent()%"></div>
        </div>
        <div class="progress-text">@Data.CompletedGoalCount of @Data.TotalGoalCount goals completed</div>
    </div>

    <div class="action-section">
        <button class="continue-button" @onclick="CloseModal">Continue Investigation</button>
    </div>
</div>
