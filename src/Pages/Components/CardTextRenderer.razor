@namespace Wayfarer.Pages.Components

@code {
    [Parameter] public string TemplateId { get; set; }
    [Parameter] public CardContext Context { get; set; }
    
    private string GetCardText()
    {
        // Map template and context to narrative text
        // This is where frontend generates the actual narrative
        return TemplateId switch
        {
            // Generic templates
            "SimpleGreeting" => Context?.Personality switch
            {
                PersonalityType.DEVOTED => "It's wonderful to see you again.",
                PersonalityType.MERCANTILE => "Good to see you, friend. Business treating you well?",
                PersonalityType.PROUD => "Ah, you've arrived.",
                PersonalityType.CUNNING => "Well, well... look who's here.",
                _ => "Good to see you."
            },
            
            "CasualInquiry" => Context?.ObservationType switch
            {
                "Normal" => "The weather has been unusual lately...",
                _ => "How has your day been?"
            },
            
            "ActiveListening" => "*nod and listen attentively*",
            
            // Trust templates
            "OfferHelp" => Context?.Personality switch
            {
                PersonalityType.DEVOTED => "Please, let me help you with this.",
                PersonalityType.STEADFAST => "Here's what I'd do in your position...",
                _ => "Is there anything I can do for you?"
            },
            
            "SharePersonal" => Context?.Personality switch
            {
                PersonalityType.DEVOTED => "My family has a saying about times like these...",
                PersonalityType.STEADFAST => "I'll tell you what I really think...",
                _ => "Let me share something with you..."
            },
            
            "MakePromise" => Context?.Personality switch
            {
                PersonalityType.PROUD => "I need someone I can trust with this.",
                _ => "You have my word on this."
            },
            
            "ExpressEmpathy" => Context?.Personality switch
            {
                PersonalityType.DEVOTED => "I've been worried about you...",
                _ => "I understand how you feel."
            },
            
            // Commerce templates
            "DiscussBusiness" => "Business has been interesting lately.",
            "ProposeDeal" => "I know of a profitable opportunity...",
            "NegotiateTerms" => "Perhaps we can come to an arrangement?",
            "OfferWork" => "I might have a delivery job for you.",
            
            // Status templates
            "AcknowledgePosition" => "Your reputation precedes you...",
            "ShowRespect" => Context?.Personality switch
            {
                PersonalityType.PROUD => "One must maintain proper standards...",
                PersonalityType.DEVOTED => "Stay out of trouble.",
                _ => "I respect what you're doing."
            },
            "DiscussPolitics" => "The political situation is quite delicate.",
            "MentionConnections" => "I know someone who might help.",
            
            // Shadow templates
            "ShareSecret" => "Between you and me...",
            "ImplyKnowledge" => "I know something others don't...",
            "OfferInformation" => "I might have information you need.",
            "RequestDiscretion" => "Let's keep this between us.",
            
            // State change templates
            "CalmnessAttempt" => "Take a breath. We'll figure this out together.",
            "OpeningUp" => "I understand your hesitation, but I'm here to help.",
            "ShowingTension" => "*uncomfortable pause*",
            "BecomingEager" => "Yes! Tell me more about this!",
            
            // Crisis templates
            "DesperateRequest" => Context?.Personality switch
            {
                PersonalityType.DEVOTED => "Please, I need to know - will you help me? The letter to Lord Blackwood... if he doesn't receive my refusal by tonight, my father will finalize the arrangement.",
                PersonalityType.MERCANTILE => "Listen, this isn't just business anymore - if I don't get this contract delivered today, I'll lose everything!",
                PersonalityType.PROUD => "I... I never thought I'd have to beg, but here I am. This letter contains my family's last hope.",
                _ => "Please, I'm desperate! You must help me!"
            },
            
            "UrgentPlea" => "Time is running out! Please!",
            "LastChance" => "This is my last chance...",
            
            // Letter/Obligation templates
            "MentionLetter" => Context?.Personality switch
            {
                PersonalityType.MERCANTILE => "I have a business matter that needs delivery...",
                _ => "I need you to deliver something for me..."
            },
            "DeliverLetter" => "I have your letter right here.",
            "DiscussObligation" => "About that letter you're carrying for me...",
            "NegotiateDeadline" => "Could we discuss the timeline?",
            
            // Observation templates
            "MentionObservation" => "I noticed something earlier...",
            "ShareInformation" => "I heard something interesting in the market...",
            "ProvideContext" => "There's something you should know...",
            
            _ => "..."
        };
    }
}

@GetCardText()