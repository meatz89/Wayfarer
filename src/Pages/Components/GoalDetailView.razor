@inherits GoalDetailViewBase

@namespace Wayfarer.Pages.Components

@if (SelectedGoal != null)
{
    <div class="location-goal-detail-view">
        <div class="goal-detail-header">
            <div class="goal-detail-name">@SelectedGoal.Name</div>
            <div class="goal-system-badge @SelectedGoal.SystemTypeLowercase">@SelectedGoal.SystemType</div>
        </div>

        @if (!string.IsNullOrEmpty(SelectedGoal.Description))
        {
            <div class="goal-detail-description">@SelectedGoal.Description</div>
        }

        <div class="goal-detail-info">
            <div class="info-section">
                <div class="info-label">Difficulty</div>
                <div class="info-value">
                    @if (SelectedGoal.SystemType == TacticalSystemType.Social)
                    {
                        <span>Doubt Rate: @SelectedGoal.Difficulty</span>
                    }
                    else if (SelectedGoal.SystemType == TacticalSystemType.Mental)
                    {
                        <span>Exposure: @SelectedGoal.Difficulty</span>
                    }
                    else if (SelectedGoal.SystemType == TacticalSystemType.Physical)
                    {
                        <span>Danger: @SelectedGoal.Difficulty</span>
                    }
                </div>
            </div>

            @if (SelectedGoal.HasCosts)
            {
                <div class="info-section">
                    <div class="info-label">Costs</div>
                    <div class="info-value">
                        @if (SelectedGoal.FocusCost > 0)
                        {
                            <span>Focus: @SelectedGoal.FocusCost</span>
                        }
                        @if (SelectedGoal.StaminaCost > 0)
                        {
                            <span>Stamina: @SelectedGoal.StaminaCost</span>
                        }
                    </div>
                </div>
            }
        </div>

        <div class="goal-detail-actions">
            <button class="action-button primary" @onclick="async () => await OnCommitToGoal.InvokeAsync(SelectedGoal.Goal)">
                BEGIN CHALLENGE
            </button>
            <button class="action-button" @onclick="() => OnNavigateBack.InvokeAsync()">
                Cancel
            </button>
        </div>
    </div>
}
