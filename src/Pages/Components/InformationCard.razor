@namespace Wayfarer.Pages.Components

<div class="info-card tier-@Info.Tier @(Info.IsAccessUnlocked ? "unlocked" : "locked")">
    <div class="info-header">
        <h4 class="info-name">@Info.Name</h4>
        @if (!Info.IsAccessUnlocked)
        {
            <span class="lock-icon">üîí</span>
        }
        else
        {
            <span class="unlock-icon">üîì</span>
        }
    </div>
    
    <div class="info-description">
        @Info.Description
    </div>
    
    <div class="info-meta">
        <span class="discovered-date">Discovered: Day @Info.DayDiscovered</span>
        <span class="tier-badge">Tier @Info.Tier</span>
    </div>
    
    @if (!Info.IsAccessUnlocked)
    {
        <div class="access-requirements">
            <h5>Access Requirements:</h5>
            <div class="requirement-list">
                @if (Info.TokenRequirements.Any())
                {
                    foreach (var tokenReq in Info.TokenRequirements)
                    {
                        <div class="requirement-item">
                            <span class="req-icon">ü™ô</span>
                            <span>@tokenReq.Value @tokenReq.Key tokens</span>
                        </div>
                    }
                }
                @if (Info.SealRequirements.Any())
                {
                    foreach (var seal in Info.SealRequirements)
                    {
                        <div class="requirement-item">
                            <span class="req-icon">üèÖ</span>
                            <span>@seal</span>
                        </div>
                    }
                }
                @if (Info.EquipmentRequirements.Any())
                {
                    foreach (var equipment in Info.EquipmentRequirements)
                    {
                        <div class="requirement-item">
                            <span class="req-icon">üõ†Ô∏è</span>
                            <span>@equipment</span>
                        </div>
                    }
                }
                @if (Info.CoinCost > 0)
                {
                    <div class="requirement-item">
                        <span class="req-icon">üí∞</span>
                        <span>@Info.CoinCost coins</span>
                    </div>
                }
            </div>
            
            <button class="btn-unlock @(Info.CanAfford ? "" : "disabled")" 
                    @onclick="OnUnlock"
                    disabled="@(!Info.CanAfford)">
                @(Info.CanAfford ? "Unlock Access" : "Cannot Afford")
            </button>
        </div>
    }
</div>

@code {
    [Parameter] public DiscoveredInfoViewModel Info { get; set; }
    [Parameter] public EventCallback OnUnlock { get; set; }
}