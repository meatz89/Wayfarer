@using Wayfarer.Pages.Components

@inherits MainGameplayViewBase

@{
    Console.WriteLine($"[MainGameplayView.razor] Rendering with CurrentScreen: {CurrentScreen}");
    Console.WriteLine($"[MainGameplayView.razor] CurrentView parameter: {CurrentView}");
}

@switch (CurrentScreen)
{
    case CurrentViews.LetterQueueScreen:
        <ObligationQueueScreen OnNavigate="HandleNavigation" ReturnView="@PreviousView" />
        break;

    case CurrentViews.ConversationScreen:
        <ConversationScreen NpcId="@SelectedNpcId" OnConversationEnd="@HandleConversationEnd" />
        break;

    case CurrentViews.LocationScreen:
        <LocationScreen OnActionExecuted="RefreshUI" OnNavigate="HandleNavigation" />
        break;

    case CurrentViews.TravelScreen:
        <TravelSelection 
            CurrentLocation="@GetCurrentLocation()"
            Locations="@Locations"
            OnTravelRoute="@HandleTravelRoute"
            OnNavigate="@HandleNavigation" />
        break;
        
    default:
        // For any screen we haven't implemented, show LocationScreen
        <LocationScreen OnActionExecuted="RefreshUI" OnNavigate="HandleNavigation" />
        break;
}