/* Base styles */
:root {
    /* Primary Colors */
    --parchment: #F2E8D5; /* Main background, like aged paper */
    --oak-dark: #5D4037; /* Dark wood, for headers and borders */
    --oak-mid: #8D6E63; /* Medium wood tone for panels */
    --leather: #A87D5F; /* Warm brown for interactive elements */
    --charcoal: #3E3E3E; /* Deep gray for text */
    /* Secondary Colors */
    --moss: #606C38; /* Natural green for positive elements */
    --clay: #BC6C25; /* Warm accent for important elements */
    --rust: #9E2A2B; /* Muted red for negative/danger */
    --slate: #556573; /* Bluish gray for neutral info */
    --parchment-dark: #E8DCBE; /* Darker parchment for alternating elements */
    /* UI Element Colors */
    --bg-dark: #2C2622; /* Dark background, like shadowy interior */
    --bg-panel: #3D3229; /* Panel background, like wooden panels */
    --bg-card: #584942; /* Card background, like leather */
    --bg-active: #6E5C4E; /* Active element background */
    --border-active: #8D7766; /* Active element border */
    /* Text Colors */
    --text-primary: #F2E8D5; /* Primary text, light parchment */
    --text-secondary: #C3B9A2; /* Secondary text, muted parchment */
    --text-muted: #857D6B; /* Muted text, very faded parchment */
    /* Resource Colors */
    --resource-health: #9E2A2B; /* Health, muted red */
    --resource-coins: #DAA520; /* Coins, muted gold */
    --resource-food: #606C38; /* Food, forest green */
    --resource-energy: #BC6C25; /* Energy, amber */
    --resource-confidence: #556573; /* Confidence, slate blue */
    --resource-concentration: #7D7045; /* Concentration, burnished bronze */
    /* Status Colors */
    --positive: #606C38; /* Positive outcomes, moss green */
    --negative: #9E2A2B; /* Negative outcomes, rust red */
    --neutral: #8D7766; /* Neutral outcomes, medium wood */
    --special: #BC6C25; /* Special items/events, clay */
    /* Tag Colors */
    --approach-tag: #607455; /* Approach tags, sage green */
    --focus-tag: #7D7045; /* Focus tags, burnished bronze */
    --narrative-tag: #856A67; /* Narrative tags, faded purple-brown */
    --strategic-tag: #8B6E52; /* Strategic tags, medium leather */
    /* Font Settings */
    --font-primary: 'Cinzel', serif; /* Headers, titles */
    --font-secondary: 'Lora', 'Georgia', serif; /* Body text */
    --font-tertiary: 'EB Garamond', serif; /* Descriptions, flavorful text */
}
body {
    margin: 0;
    background-color: var(--bg-dark);
    color: var(--text-primary);
    font-family: var(--font-secondary);
    line-height: 1.5;
    background-image: url("/images/subtle-parchment.png");
    background-repeat: repeat;
}

.game-container {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 20px;
    max-width: 1200px;
    margin: 20px auto;
    padding: 0 20px;
}

/* Narrative container */
.narrative-container {
    background-color: var(--bg-panel);
    border: 1px solid var(--oak-dark);
    border-radius: 5px;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    align-items: normal;
}

.narrative-text {
    font-family: var(--font-tertiary);
    color: var(--text-primary);
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 2rem;
    text-align: center;
    max-width: 90%;
}

.sidebar {
    min-width: 400px;
}

.top-bar, .map-container, .sidebar-panel {
    border: 1px solid var(--oak-dark);
    border-radius: 5px;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);
}

.locations-grid {
    background-color: var(--bg-panel);
    border: 1px solid var(--oak-dark);
    border-radius: 5px;
    padding: 1rem;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);
    display: flex;
    gap: 20px;
    flex-direction: column;
}

.encounter-container {
    background-color: var(--bg-panel);
    border: 1px solid var(--oak-dark);
    border-radius: 5px;
    padding: 1rem;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);
    display: flex;
    flex-direction: column;
}

.sidebar-panel 
{
    background-color: var(--bg-panel);
    padding: 1rem;
    margin-bottom: 10px;
}

/* Panel headers */
.panel-title, .properties-header {
    font-family: var(--font-primary);
    font-weight: normal;
    letter-spacing: 0.05em;
    color: var(--leather);
    border-bottom: 1px solid var(--oak-mid);
    margin-bottom: 0.5rem;
}

/* Location cards */
.location-card {
    background-color: var(--bg-card);
    border: 1px solid var(--oak-mid);
    border-radius: 5px;
    padding: 1rem;
    transition: all 0.2s ease;
    position: relative;
}

    .location-card.current {
        background-color: var(--bg-active);
        border: 2px solid var(--leather);
        box-shadow: 0 0 15px rgba(168, 125, 95, 0.3);
    }

.location-name {
    font-family: var(--font-primary);
    color: var(--parchment);
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    border-bottom: 1px solid var(--oak-mid);
    padding-bottom: 0.3rem;
}

/* Property tags */
.property-tag {
    display: inline-flex;
    align-items: center;
    margin: 3px;
    padding: 5px 10px;
    border-radius: 3px;
    background: var(--bg-panel);
    border: 1px solid var(--oak-mid);
    font-size: 0.85em;
    color: var(--text-secondary);
}

.property-icon {
    margin-right: 5px;
}

/* Action buttons */
.action-button {
    background-color: var(--leather);
    color: var(--parchment);
    border: none;
    padding: 8px 12px;
    border-radius: 3px;
    cursor: pointer;
    width: 100%;
    margin-top: 8px;
    font-family: var(--font-primary);
    letter-spacing: 0.05em;
    transition: all 0.2s ease;
}

    .action-button:hover:not(:disabled) {
        background-color: var(--clay);
        transform: translateY(-1px);
    }

    .action-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background-color: var(--text-muted);
    }


.encounter-stats {
    display: flex;
    gap: 20px;
    padding: 1rem;
    margin-bottom: 1rem;
    background-color: var(--bg-card);
    border-radius: 5px;
    border: 1px solid var(--oak-mid);
}

.stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    min-width: 100px;
    position: relative;
}

.stat-label {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin: 4px 0;
    font-family: var(--font-tertiary);
}

.stat-value {
    font-weight: bold;
    font-size: 1.2rem;
    color: var(--parchment);
}

/* Encounter stage */
.encounter-stage {
    background-color: var(--bg-card);
    padding: 1.5rem;
    border-radius: 5px;
    margin-bottom: 1.5rem;
    border: 1px solid var(--oak-mid);
}

.choice-set-name {
    font-family: var(--font-primary);
    color: var(--leather);
    margin-bottom: 1rem;
    font-size: 1.2rem;
    font-weight: normal;
}

.stage-situation {
    line-height: 1.6;
    font-family: var(--font-tertiary);
    font-size: 1.1rem;
    color: var(--text-primary);
    white-space: pre-line;
    margin-bottom: 1rem;
}

.danger {
    color: var(--resource-health);
}

.status-effect.negative {
    border-left: 3px solid var(--resource-health);
}

/* Choice options */
.encounter-choices {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.choice-option {
    background-color: var(--bg-card);
    border-radius: 5px;
    padding: 15px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    gap: 10px;
    border-left: 4px solid transparent;
}

    .choice-option:hover:not(.disabled) {
        background-color: var(--bg-active);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .choice-option.disabled {
        opacity: 0.7;
        cursor: not-allowed;
        background-color: var(--bg-card);
    }

.choice-index {
    color: var(--leather);
    min-width: 25px;
    font-weight: bold;
}

/* Tooltip styling */
.tooltip {
    position: fixed;
    background-color: var(--parchment);
    color: var(--charcoal);
    border: 1px solid var(--oak-dark);
    padding: 1rem;
    border-radius: 4px;
    z-index: 1000;
    min-width: 300px;
    max-width: 400px;
    max-height: 80vh;
    overflow-y: auto;
    pointer-events: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

    .tooltip h4, .tooltip h5 {
        font-family: var(--font-primary);
        color: var(--oak-dark);
        margin-top: 0;
        border-bottom: 1px solid var(--oak-mid);
        padding-bottom: 0.5rem;
    }


.tooltip-item {
    background-color: var(--parchment-dark);
    padding: 0.7rem;
    border-radius: 3px;
    margin-bottom: 0.5rem;
}

/* Map toggle */
.map-toggle {
    position: absolute;
    top: -40px;
    right: 20px;
    display: flex;
    gap: 10px;
}

.toggle-button {
    background-color: var(--bg-panel);
    border: 1px solid var(--oak-mid);
    color: var(--text-primary);
    padding: 8px 16px;
    border-radius: 3px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-family: var(--font-primary);
    letter-spacing: 0.05em;
    width: 200px;
    height: 70px;
    display: flex;
    flex-direction: column-reverse;
}

    .toggle-button:hover {
        background-color: var(--leather);
    }

    .toggle-button.active {
        background-color: var(--leather);
        border: 1px solid var(--clay);
    }

/* Tag styling */
.tag-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 8px;
    margin-bottom: 1rem;
}

.tag-value {
    display: flex;
    justify-content: space-between;
    background-color: var(--bg-card);
    padding: 8px 12px;
    border-radius: 3px;
    border-left: 3px solid var(--approach-tag);
}

/* Character stats */
.stat-grid, .resource-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    margin-bottom: 1rem;
}

.player-stat {
    background-color: var(--bg-card);
    padding: 8px 12px;
    border-radius: 3px;
    display: grid;
    align-items: center;
}

    .player-stat .stats-header {
    }

    .player-stat .stat-icon {
        width: 24px;
        text-align: center;
        margin-right: 8px;
    }

.player-resource {
    background-color: var(--bg-card);
    padding: 8px 12px;
    border-radius: 3px;
    display: flex;
    gap: 5px;
    align-items: center;
}
    .player-resource .resource-icon {
        width: 24px;
        text-align: center;
        margin-right: 8px;
    }

/* Inventory grid */
.inventory-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    margin-bottom: 1rem;
}

.inventory-item {
    background-color: var(--bg-card);
    padding: 8px 12px;
    border-radius: 3px;
    display: flex;
    align-items: center;
}

.item-icon {
    width: 24px;
    text-align: center;
    margin-right: 8px;
}

.item-name {
    flex-grow: 1;
    color: var(--text-secondary);
}

.item-count {
    background-color: var(--leather);
    color: var(--parchment);
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: bold;
}


.narrative-message {
    font-family: var(--font-tertiary);
    line-height: 1.6;
    color: var(--text-primary);
    font-size: 1.1rem;
    white-space: pre-line;
    margin-bottom: 2rem;
    padding: 0 1rem;
}

.narrative-button {
    background-color: var(--leather);
    border: none;
    color: var(--parchment);
    padding: 12px 30px;
    border-radius: 3px;
    cursor: pointer;
    font-family: var(--font-primary);
    font-size: 1.1rem;
    letter-spacing: 0.05em;
    transition: all 0.2s ease;
}

    .narrative-button:hover {
        background-color: var(--clay);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

/* Time display */
.time-display {
    font-family: var(--font-primary);
    color: var(--leather);
    font-size: 1.1rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Value coloring */
.positive-change {
    color: var(--positive);
    font-weight: bold;
}

.negative-change {
    color: var(--negative);
    font-weight: bold;
}

.info-change {
    color: var(--slate);
    font-weight: bold;
}

/* Character creation */
.archetype-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 20px;
    margin-bottom: 2rem;
}

.archetype-card {
    background-color: var(--bg-card);
    border: 2px solid transparent;
    border-radius: 5px;
    padding: 1.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

    .archetype-card:hover {
        background-color: var(--bg-active);
        transform: translateY(-2px);
    }

    .archetype-card.selected {
        border-color: var(--leather);
        background-color: var(--bg-active);
        box-shadow: 0 0 15px rgba(168, 125, 95, 0.3);
    }

.archetype-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    display: block;
}

.archetype-name-bold {
    font-family: var(--font-primary);
    font-size: 1.2rem;
    color: var(--parchment);
    margin-bottom: 0.5rem;
}

.archetype-description {
    color: var(--text-secondary);
    font-family: var(--font-tertiary);
    margin-bottom: 1rem;
    font-size: 0.9rem;
    line-height: 1.6;
}

.character-input {
    padding: 10px;
    background-color: var(--bg-card);
    border: 1px solid var(--oak-mid);
    border-radius: 4px;
    color: var(--text-primary);
    font-family: var(--font-secondary);
    font-size: 1rem;
    margin-top: 5px;
}

.effects-section {
    display: flex;
    gap: 5px;
}

/* Tier badges */
.tier-badge {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 3px;
    font-size: 0.8rem;
    margin: 0 0 1rem 0;
    color: var(--text-primary);
    font-family: var(--font-primary);
    letter-spacing: 0.05em;
}

    .tier-badge.tier-1 {
        background-color: #606060;
    }

    .tier-badge.tier-2 {
        background-color: #2F6329;
    }

    .tier-badge.tier-3 {
        background-color: #19559E;
    }

    .tier-badge.tier-4 {
        background-color: #6A3A99;
    }

    .tier-badge.tier-5 {
        background-color: #A25B0F;
    }

.affinity-badge {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 3px;
    font-size: 0.8rem;
    margin: 0 0 1rem 0;
    font-family: var(--font-primary);
    letter-spacing: 0.05em;
}

.natural-affinity {
    background-color: var(--moss);
    color: var(--parchment);
}

.unnatural-affinity {
    background-color: var(--clay);
    color: var(--parchment);
}

.dangerous-affinity {
    background-color: var(--rust);
    color: var(--parchment);
}

.neutral-affinity {
    background-color: var(--slate);
    color: var(--parchment);
}

/* Service icons */
.service-icons {
    display: flex;
    gap: 5px;
    margin-top: 5px;
}

.service-icon {
    background-color: var(--bg-panel);
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
}

/* Hide scrollbar for cleaner look */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-panel);
}

::-webkit-scrollbar-thumb {
    background: var(--oak-mid);
    border-radius: 4px;
}

    ::-webkit-scrollbar-thumb:hover {
        background: var(--oak-dark);
    }

/* Add a subtle texture to make the UI feel more medieval/aged */
.location-card, .encounter-stage, .narrative-container, .sidebar-panel {
    background-image: url("/images/subtle-texture.png");
    background-repeat: repeat;
    background-blend-mode: overlay;
}

/* Character Creation Styles */
.character-creation {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    background-color: var(--bg-panel);
    border-radius: 5px;
}

.input-section {
    margin-bottom: 20px;
}

/* Character Creation Specific Styles */
.character-input {
    padding: 10px;
    background-color: var(--bg-card);
    border: 1px solid var(--border-active);
    border-radius: 4px;
    color: var(--text-primary);
    font-size: 1em;
    margin-top: 5px;
}

.tooltip-item.wide {
    width: 100%;
}

.tooltip-item.archetype-card {
    cursor: pointer;
    transition: all 0.2s;
    margin-bottom: 8px;
    margin-bottom: 1rem;
}

    .tooltip-item.archetype-card:hover {
        background-color: var(--bg-active);
    }

    .tooltip-item.archetype-card.selected {
        border-left: 4px solid var(--resource-coins);
        background-color: var(--bg-active);
    }

.action-button-container {
    margin-top: 20px;
    text-align: center;
}

.starting-items {
    font-size: 0.9em;
}

.items-list {
    margin-top: 5px;
    color: var(--text-secondary);
}

    .items-list .item {
        margin-bottom: 2px;
    }


/* Character Creation - Container */
.character-creation-container {
    max-width: 800px;
    margin: 0 auto;
    background-color: var(--bg-panel);
    border-radius: 5px;
    padding: 20px;
}

.character-creation-title {
    text-align: center;
    color: var(--text-primary);
    margin-bottom: 5px;
    font-size: 1.5em;
}

.character-creation-subtitle {
    text-align: center;
    color: var(--text-secondary);
    margin-bottom: 20px;
}

.section-header {
    font-size: 1.1em;
    color: var(--text-primary);
    margin-bottom: 15px;
    padding-bottom: 5px;
    border-bottom: 1px solid var(--bg-card);
}

.creation-button {
    background-color: var(--bg-active);
    border: none;
    color: var(--text-primary);
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1em;
    transition: background-color 0.2s;
    margin-top: 20px;
}

.creation-button:hover {
    background-color: var(--border-active);
}

.creation-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.archetype-selection {
    margin-bottom: 20px;
}

.archetype-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 15px;
    margin-top: 15px;
    margin-bottom: 1rem;
}

.archetype-card {
    background-color: var(--bg-card);
    border: 2px solid transparent;
    border-radius: 5px;
    padding: 15px;
    cursor: pointer;
    transition: all 0.2s;
    min-height: 25rem;
    margin-bottom: 1rem;
}

    .archetype-card:hover {
        background-color: var(--bg-active);
    }

    .archetype-card.selected {
        border-color: var(--resource-coins);
        background-color: var(--bg-active);
    }

.archetype-icon {
    font-size: 2em;
}

.player-archetype {
    display: flex;
    align-items: center;
    gap: 15px;
    background-color: var(--bg-card);
    padding: 8px 12px;
    border-radius: 4px;
}

.archetype-name {
    color: var(--text-secondary);
}

.archetype-name-bold {
    margin-top: 1rem;
    font-weight: bold;
    color: var(--text-primary);
}

.archetype-description {
    font-size: 0.9em;
    color: var(--text-secondary);
    margin: 1rem;
}

.archetype-approaches {
    font-size: 0.9em;
    color: var(--text-secondary);
    margin: 1rem;
}

.archetype-property-title {
    font-weight: bold;
    color: var(--text-primary);
}

.selected-indicator {
    text-align: end;
}

.items-list {
    margin-top: 3px;
    margin-left: 1rem;
}

.items-list .item {
    margin-bottom: 2px;
}

.selection-check {
    position: absolute;
    top: 10px;
    right: 10px;
    color: var(--resource-coins);
    font-size: 1.2em;
}
.creation-section {
    background-color: var(--bg-card);
    border-radius: 4px;
    padding: 15px;
    margin-bottom: 20px;
}

.button-container {
    text-align: center;
}

.info-change {
    color: #007bff;
}

.value-icon {
    margin-right: 5px;
    font-style: normal;
}

.location-icon, .spot-icon, .action-icon, .character-icon,
.relationship-icon, .travel-icon, .added-icon, .removed-icon {
    font-size: 1.2em;
}
/* Additional styles for improved visuals */
.confirm-button {
    background-color: var(--moss);
}

    .confirm-button:hover {
        background-color: var(--positive);
    }

.cancel-button {
    background-color: var(--oak-mid);
}

    .cancel-button:hover {
        background-color: var(--oak-dark);
    }

.action-buttons {
    display: flex;
    gap: 10px;
    margin-top: 1rem;
}

.action-description {
    color: var(--text-secondary);
    font-style: italic;
    font-family: var(--font-tertiary);
    margin-top: 0.5rem;
    line-height: 1.5;
}

.tooltip-item-content {
    line-height: 1.5;
}

.value-icon {
    font-style: normal;
    margin-right: 8px;
}

.blocked-reason {
    font-style: italic;
    color: var(--rust);
    margin-top: 5px;
    font-size: 0.9rem;
}

.choice-option.tier-1 {
    border-left-color: #606060;
}

.choice-option.tier-2 {
    border-left-color: #2F6329;
}

.choice-option.tier-3 {
    border-left-color: #19559E;
}

.choice-option.tier-4 {
    border-left-color: #6A3A99;
}

.choice-option.tier-5 {
    border-left-color: #A25B0F;
    box-shadow: 0 0 5px rgba(162, 91, 15, 0.5);
}

/* Improve player panel layout */
.player-archetype {
    background-color: var(--bg-card);
    border-radius: 5px;
    padding: 0.8rem;
    display: flex;
    align-items: center;
    margin-bottom: 1rem;
}

.archetype-icon {
    font-size: 1.5rem;
    margin-right: 1rem;
}

.archetype-name {
    font-family: var(--font-primary);
    font-size: 1.2rem;
    color: var(--text-primary);
}

.properties-grid {
    margin-bottom: 1rem;
}

.encounter-details {
    margin-bottom: 1rem;
}