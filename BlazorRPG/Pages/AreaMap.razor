@* AreaMap.razor *@
@inject ActionManager ActionManager
@inject GameState GameState

<div class="locations-grid">
    @foreach (Location location in Locations)
    {
        <div class="location-card @(location.Name == CurrentLocation.Name ? "current" : "reachable")">
            <div class="location-name">
                @location.Name @(location.Name == CurrentLocation.Name ? "(Current)" : "")
            </div>
            <div class="location-type">@location.CoreType</div>
            <div class="location-time">⏰ @location.TimeWindows</div>

            @if (location.HasBadShelter)
            {
                <div class="location-warning">⚠️ Bad Shelter</div>
            }

            @if (location.HasShelter)
            {
                <div class="location-shelter">🏠 Shelter Available (@location.ShelterCost 🪙)</div>
            }

            @if (location.Name != CurrentLocation.Name)
            {
                <button class="action-button"
                        @onclick="() => OnTravel.InvokeAsync(location.Name)"
                        disabled="@(!ActionManager.CanTravelTo(location.Name))">
                    TRAVEL HERE
                </button>
            }
        </div>
    }
</div>

@code {
    [Parameter] public Location CurrentLocation { get; set; }
    [Parameter] public List<Location> Locations { get; set; }
    [Parameter] public EventCallback<LocationNames> OnTravel { get; set; }
}